webpackJsonp([42],{MXr7:function(e,t){},qmBR:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("HzJ8"),r=o.n(a),i=[{key:"ruleNo",label:"规则编号",width:"auto"},{key:"ruleName",label:"规则名称",width:"auto"},{key:"riskTarget",label:"风险指标",width:"auto"},{key:"responseName",label:"响应",width:"auto"}],s={data:function(){return{createDropdownData:{},checkboxModel:"",operationBtns:[{name:"查看",identifier:"",isShow:!0},{name:"添加规则",identifier:"",dialog:{dialogFormVisible:!1,form:{strategyId:this.$route.query.id,ruleName:"",status:"1",productType:this.$route.query.productTypeName,riskGradeId:"",overdueDaysId:"",overdueAmountId:"",responseId:"",responseFirst:"",responseSecond:"",responseThird:""},rule:{ruleName:[{required:!0,message:"不能为空",trigger:"blur"},this.$util.formRule.caseName],riskGradeId:[{required:!0,message:"请选择",trigger:"change"}],overdueDaysId:[{required:!0,message:"请选择",trigger:"change"}],overdueAmountId:[{required:!0,message:"请选择",trigger:"change"}],responseId:[{required:!0,message:"请选择",trigger:"change"}]},formName:"createForm",url:"/api/assignee/setup/addAiRule",title:"添加规则"},isShow:!1},{name:"编辑",identifier:"",dialog:{dialogFormVisible:!1,form:{strategyId:"",ruleName:"",status:"",productType:"",riskGradeId:"",overdueDaysId:"",overdueAmountId:"",responseId:"",responseFirst:"",responseSecond:"",responseThird:""},rule:{ruleName:[{required:!0,message:"不能为空",trigger:"blur"},this.$util.formRule.caseName],riskGradeId:[{required:!0,message:"请选择",trigger:"change"}],overdueDaysId:[{required:!0,message:"请选择",trigger:"change"}],overdueAmountId:[{required:!0,message:"请选择",trigger:"change"}],responseId:[{required:!0,message:"请选择",trigger:"change"}]},formName:"editForm",url:"/api/assignee/setup/editAiRule",title:"编辑"},isShow:!0},{name:"删除规则",identifier:"",form:{ids:"",strategyId:""},url:"/api/assignee/setup/deleteAiRule",isShow:!1}],hasSearch:!1,tb:{data:[],fields:i},loading:!1,rules:{},total:0,selected:[],filterParams:{currentPage:1,pageSize:15,strategyId:this.$route.query.id,status:""},tbStatus:""}},components:{pagination:o("XBA1").a},created:function(){this.getList()},methods:{getList:function(e){var t=this;this.filterParams.status=e,this.loading=!0,this.$axios.post("/api/assignee/setup/queryAiRuleList",this.filterParams).then(function(e){t.loading=!1,0==e.data.code?(t.tb.data=e.data.data.items,t.total=e.data.data.totalNum):t.$util.failCallback(e.data,t),t.loading=!1}).catch(function(e){t.loading=!1})},changeSize:function(e){this.filterParams.pageSize=e,this.getList()},switchChange:function(e){var t=this;this.$axios.post("/api/assignee/setup/editAiRule",{strategyId:this.$route.query.id,id:e.id,status:e.status}).then(function(o){0==o.data.code?(t.$message({type:"success",message:o.data.msg}),t.getList()):(t.$util.failCallback(o.data,t),"0"==e.status?e.status="1":"1"==e.status&&(e.status="0"))}).catch(function(e){})},changePage:function(e){this.filterParams.currentPage=e,this.getList()},handleSelectionChange:function(e){this.selected=[];var t=!0,o=!1,a=void 0;try{for(var i,s=r()(e);!(t=(i=s.next()).done);t=!0){var l=i.value;this.selected.push(l.id)}}catch(e){o=!0,a=e}finally{try{!t&&s.return&&s.return()}finally{if(o)throw a}}},deleteHandle:function(e){var t=this;this.selected.length>=1?this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$axios.post(e.url,{ids:t.selected}).then(function(e){0==e.data.code?(t.getList(),t.$message({type:"success",message:e.data.msg})):t.$util.failCallback(e.data,t)},function(e){})}).catch(function(){}):this.$alert("请选择一条记录进行操作！","提示",{confirmButtonText:"确定"})},openCreateDialog:function(e){void 0!==this.$refs[e.dialog.formName]&&this.$refs[e.dialog.formName].resetFields(),e.dialog.dialogFormVisible=!0,this.getcreateDropdownData()},getcreateDropdownData:function(){var e=this;this.$axios.post("/api/assignee/setup/initAddAiRule",{}).then(function(t){0==t.data.code?e.createDropdownData=t.data.data:e.$util.failCallback(t.data,e)}).catch(function(e){})},dialogCloseHandle:function(e){e.dialog.dialogFormVisible=!1,this.$refs[e.dialog.form].resetFields()},openEditDialog:function(e,t){var o=this;e.dialog.dialogFormVisible=!0,this.$axios.post("/api/assignee/setup/queryAiRule",{id:t.id}).then(function(t){0==t.data.code?(o.getcreateDropdownData(),e.dialog.form=t.data.data,e.dialog.form.strategyId=o.$route.query.id,e.dialog.form.productType=o.$route.query.productTypeName):o.$util.failCallback(t.data,o)}).catch(function(e){})},dialogSubmitHandle:function(e){var t=this;this.$refs[e.dialog.formName].validate(function(o){o&&t.$axios.post(e.dialog.url,e.dialog.form).then(function(o){0==o.data.code?(t.getList(),t.$message({type:"success",message:o.data.msg}),t.dialogCloseHandle(e)):t.$util.failCallback(o.data,t)}).catch(function(e){})})},changeRadio:function(e){this.checkboxModel=e,this.getList(e)}}},l={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"content-body"},[o("div",{staticClass:"bd-top"},[o("div",{staticClass:"md clearfix"},[e._m(0),e._v(" "),o("div",{staticClass:"md-right"},[o("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(t){t.preventDefault(),e.openCreateDialog(e.operationBtns[1])}}},[e._v(e._s(e.operationBtns[1].name))]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(t){t.preventDefault(),e.deleteHandle(e.operationBtns[3])}}},[e._v(e._s(e.operationBtns[3].name))])],1)])]),e._v(" "),o("div",{staticClass:"bd-main"},[o("el-row",[o("el-col",{attrs:{span:5}},[e._v("策略编号："+e._s(this.$route.query.strategyNo))]),e._v(" "),o("el-col",{attrs:{span:5}},[e._v("策略名称："+e._s(this.$route.query.strategyName))]),e._v(" "),o("el-col",{attrs:{span:5}},[e._v("产品类型："+e._s(this.$route.query.productTypeName))])],1),e._v(" "),o("div",{staticStyle:{margin:"20px 0"}},[e._v("规则状态筛选：  \n      "),o("el-radio-group",{attrs:{size:"mini"},on:{change:e.changeRadio},model:{value:e.checkboxModel,callback:function(t){e.checkboxModel=t},expression:"checkboxModel"}},[o("el-radio-button",{attrs:{label:""}},[e._v("全部")]),e._v(" "),o("el-radio-button",{attrs:{label:"1"}},[e._v("已启用")]),e._v(" "),o("el-radio-button",{attrs:{label:"0"}},[e._v("已停用")])],1)],1),e._v(" "),o("div",{staticClass:"table"},[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading",data:e.tb.data,"tooltip-effect":"dark","empty-text":"暂无数据"},on:{"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{type:"selection",width:"100",fixed:"left"}}),e._v(" "),e._l(e.tb.fields,function(e){return o("el-table-column",{key:e.id,attrs:{align:"left",prop:e.key,label:e.label,width:e.width}})}),e._v(" "),o("el-table-column",{attrs:{label:"规则状态",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-switch",{attrs:{"active-value":"1","inactive-value":"0","active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(o){e.switchChange(t.row)}},model:{value:t.row.status,callback:function(o){e.$set(t.row,"status",o)},expression:"scope.row.status"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini",type:"text"},nativeOn:{click:function(o){o.preventDefault(),e.openEditDialog(e.operationBtns[2],t.row)}}},[e._v(e._s(e.operationBtns[2].name))])]}}])})],2)],1)],1),e._v(" "),o("pagination",{attrs:{total:e.total,pageSize:e.filterParams.pageSize,"current-page":e.filterParams.currentPage},on:{changePage:e.changePage,changeSize:e.changeSize}}),e._v(" "),o("el-dialog",{attrs:{title:e.operationBtns[1].dialog.title,visible:e.operationBtns[1].dialog.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.$set(e.operationBtns[1].dialog,"dialogFormVisible",t)}}},[o("el-form",{ref:e.operationBtns[1].dialog.formName,attrs:{model:e.operationBtns[1].dialog.form,"label-width":"120px",rules:e.operationBtns[1].dialog.rule,size:"mini"}},[o("el-form-item",{attrs:{label:"规则名称",prop:"ruleName"}},[o("el-input",{attrs:{"auto-complete":"off",clearable:""},model:{value:e.operationBtns[1].dialog.form.ruleName,callback:function(t){e.$set(e.operationBtns[1].dialog.form,"ruleName",t)},expression:"operationBtns[1].dialog.form.ruleName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"规则状态",prop:"status"}},[o("el-switch",{attrs:{"active-value":"1","inactive-value":"0","active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.operationBtns[1].dialog.form.status,callback:function(t){e.$set(e.operationBtns[1].dialog.form,"status",t)},expression:"operationBtns[1].dialog.form.status"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"产品类型",prop:"productType"}},[o("el-input",{attrs:{"auto-complete":"off",disabled:""},model:{value:e.operationBtns[1].dialog.form.productType,callback:function(t){e.$set(e.operationBtns[1].dialog.form,"productType",t)},expression:"operationBtns[1].dialog.form.productType"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"风险指标设置",prop:""}}),e._v(" "),o("el-form-item",{attrs:{label:"风险等级",prop:"riskGradeId"}},[o("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.operationBtns[1].dialog.form.riskGradeId,callback:function(t){e.$set(e.operationBtns[1].dialog.form,"riskGradeId",t)},expression:"operationBtns[1].dialog.form.riskGradeId"}},e._l(e.createDropdownData.riskGradeBean,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),o("el-form-item",{attrs:{label:"逾期天数",prop:"overdueDaysId"}},[o("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.operationBtns[1].dialog.form.overdueDaysId,callback:function(t){e.$set(e.operationBtns[1].dialog.form,"overdueDaysId",t)},expression:"operationBtns[1].dialog.form.overdueDaysId"}},e._l(e.createDropdownData.overdueDaysBean,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),o("el-form-item",{attrs:{label:"逾期金额",prop:"overdueAmountId"}},[o("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.operationBtns[1].dialog.form.overdueAmountId,callback:function(t){e.$set(e.operationBtns[1].dialog.form,"overdueAmountId",t)},expression:"operationBtns[1].dialog.form.overdueAmountId"}},e._l(e.createDropdownData.overdueAmountBean,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),o("el-form-item",{attrs:{label:"命中响应",prop:"responseId"}},[o("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.operationBtns[1].dialog.form.responseId,callback:function(t){e.$set(e.operationBtns[1].dialog.form,"responseId",t)},expression:"operationBtns[1].dialog.form.responseId"}},e._l(e.createDropdownData.responseBean,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),o("el-form-item",{attrs:{label:"首次外呼时间",prop:"responseFirst"}},[o("el-time-select",{attrs:{placeholder:"选择时间","picker-options":{start:"00:00",step:"00:30",end:"24:00"},clearable:""},model:{value:e.operationBtns[1].dialog.form.responseFirst,callback:function(t){e.$set(e.operationBtns[1].dialog.form,"responseFirst",t)},expression:"operationBtns[1].dialog.form.responseFirst"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"第二外呼时间",prop:"responseSecond"}},[o("el-time-select",{attrs:{placeholder:"选择时间","picker-options":{start:"00:00",step:"00:30",end:"24:00",minTime:e.operationBtns[1].dialog.form.responseFirst},clearable:""},model:{value:e.operationBtns[1].dialog.form.responseSecond,callback:function(t){e.$set(e.operationBtns[1].dialog.form,"responseSecond",t)},expression:"operationBtns[1].dialog.form.responseSecond"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"第三次外呼时间",prop:"responseThird"}},[o("el-time-select",{attrs:{placeholder:"选择时间","picker-options":{start:"00:00",step:"00:35",end:"24:00",minTime:e.operationBtns[1].dialog.form.responseSecond},clearable:""},model:{value:e.operationBtns[1].dialog.form.responseThird,callback:function(t){e.$set(e.operationBtns[1].dialog.form,"responseThird",t)},expression:"operationBtns[1].dialog.form.responseThird"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{size:"small"},nativeOn:{click:function(t){t.preventDefault(),e.dialogCloseHandle(e.operationBtns[1])}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(t){t.preventDefault(),e.dialogSubmitHandle(e.operationBtns[1])}}},[e._v("确 定")])],1)],1),e._v(" "),o("el-dialog",{attrs:{title:e.operationBtns[2].dialog.title,visible:e.operationBtns[2].dialog.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.$set(e.operationBtns[2].dialog,"dialogFormVisible",t)}}},[o("el-form",{ref:e.operationBtns[2].dialog.formName,attrs:{model:e.operationBtns[2].dialog.form,"label-width":"120px",rules:e.operationBtns[2].dialog.rule,size:"mini"}},[o("el-form-item",{attrs:{label:"规则名称",prop:"ruleName"}},[o("el-input",{attrs:{"auto-complete":"off",clearable:""},model:{value:e.operationBtns[2].dialog.form.ruleName,callback:function(t){e.$set(e.operationBtns[2].dialog.form,"ruleName",t)},expression:"operationBtns[2].dialog.form.ruleName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"规则状态",prop:"status"}},[o("el-switch",{attrs:{"active-value":"1","inactive-value":"0","active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.operationBtns[2].dialog.form.status,callback:function(t){e.$set(e.operationBtns[2].dialog.form,"status",t)},expression:"operationBtns[2].dialog.form.status"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"产品类型",prop:"productType"}},[o("el-input",{attrs:{disabled:""},model:{value:e.operationBtns[2].dialog.form.productType,callback:function(t){e.$set(e.operationBtns[2].dialog.form,"productType",t)},expression:"operationBtns[2].dialog.form.productType"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"风险指标设置",prop:""}}),e._v(" "),o("el-form-item",{attrs:{label:"风险等级",prop:"riskGradeId"}},[o("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.operationBtns[2].dialog.form.riskGradeId,callback:function(t){e.$set(e.operationBtns[2].dialog.form,"riskGradeId",t)},expression:"operationBtns[2].dialog.form.riskGradeId"}},e._l(e.createDropdownData.riskGradeBean,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),o("el-form-item",{attrs:{label:"逾期天数",prop:"overdueDaysId"}},[o("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.operationBtns[2].dialog.form.overdueDaysId,callback:function(t){e.$set(e.operationBtns[2].dialog.form,"overdueDaysId",t)},expression:"operationBtns[2].dialog.form.overdueDaysId"}},e._l(e.createDropdownData.overdueDaysBean,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),o("el-form-item",{attrs:{label:"逾期金额",prop:"overdueAmountId"}},[o("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.operationBtns[2].dialog.form.overdueAmountId,callback:function(t){e.$set(e.operationBtns[2].dialog.form,"overdueAmountId",t)},expression:"operationBtns[2].dialog.form.overdueAmountId"}},e._l(e.createDropdownData.overdueAmountBean,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),o("el-form-item",{attrs:{label:"命中响应",prop:"responseId"}},[o("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.operationBtns[2].dialog.form.responseId,callback:function(t){e.$set(e.operationBtns[2].dialog.form,"responseId",t)},expression:"operationBtns[2].dialog.form.responseId"}},e._l(e.createDropdownData.responseBean,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.code}})}))],1),e._v(" "),o("el-form-item",{attrs:{label:"首次外呼时间",prop:"responseFirst"}},[o("el-time-select",{attrs:{placeholder:"选择时间","picker-options":{start:"00:00",step:"00:30",end:"24:00"},clearable:""},model:{value:e.operationBtns[2].dialog.form.responseFirst,callback:function(t){e.$set(e.operationBtns[2].dialog.form,"responseFirst",t)},expression:"operationBtns[2].dialog.form.responseFirst"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"第二外呼时间",prop:"responseSecond"}},[o("el-time-select",{attrs:{placeholder:"选择时间","picker-options":{start:"00:00",step:"00:30",end:"24:00",minTime:e.operationBtns[1].dialog.form.responseFirst},clearable:""},model:{value:e.operationBtns[2].dialog.form.responseSecond,callback:function(t){e.$set(e.operationBtns[2].dialog.form,"responseSecond",t)},expression:"operationBtns[2].dialog.form.responseSecond"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"第三次外呼时间",prop:"responseThird"}},[o("el-time-select",{attrs:{placeholder:"选择时间","picker-options":{start:"00:00",step:"00:35",end:"24:00",minTime:e.operationBtns[2].dialog.form.responseSecond},clearable:""},model:{value:e.operationBtns[2].dialog.form.responseThird,callback:function(t){e.$set(e.operationBtns[2].dialog.form,"responseThird",t)},expression:"operationBtns[2].dialog.form.responseThird"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{nativeOn:{click:function(t){t.preventDefault(),e.dialogCloseHandle(e.operationBtns[2])}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){t.preventDefault(),e.dialogSubmitHandle(e.operationBtns[2])}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"md-left"},[t("h5",[this._v("设置规则")])])}]};var n=o("vSla")(s,l,!1,function(e){o("MXr7")},"data-v-474b9396",null);t.default=n.exports}});