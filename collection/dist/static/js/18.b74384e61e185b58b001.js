webpackJsonp([18],{NxAT:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,n=i("aA9S"),o=i.n(n),c=i("a3Yh"),l=i.n(c),s=i("MDzk"),r=i("XBA1"),d=[{key:"batchCode",label:"批次号",width:"",id:"2"},{key:"commitDate",label:"委案时间",width:"150",id:"3"},{key:"loanInstitution",label:"贷款机构",width:"",id:"10"},{key:"commitMoney",label:"委案金额",width:"",id:"4",align:"right"},{key:"repayMoney",label:"回收金额",width:"",id:"5",align:"right"},{key:"commitCount",label:"案件数量",width:"",id:"6",align:"right"},{key:"repayCount",label:"回收案件数",width:"",id:"7",align:"right"},{key:"batchRecovery",label:"金额回收率",width:"auto",id:"9",align:"right"}],h=(a={components:{},data:function(){var t;return t={batchCode:[],loanInstitution:[],countDate:[],tb:{data:[],fields:d},total:0,pageSize:15,currentPage:1,loading:!1,conditionForm:{countDateMin:"",countDateMax:"",batchCode:"",loanInstitution:"",pageSize:15,currentPage:1},searchForm:{}},l()(t,"total",0),l()(t,"hasSearch",!1),t}},l()(a,"components",{tableComponent:s.a,pagination:r.a}),l()(a,"methods",{indexMethod:function(t){return this.conditionForm.pageSize*(this.conditionForm.currentPage-1)+t+1},reset:function(){this.countDate=[],this.conditionForm.countDateMin="",this.conditionForm.countDateMax="",this.conditionForm.batchCode="",this.conditionForm.loanInstitution="",1==this.conditionForm.currentPage?this.getList(this.conditionForm):(this.conditionForm.currentPage=1,this.hasSearch=!0),this.getList()},search:function(){this.searchForm=o()({},this.conditionForm),1==this.conditionForm.currentPage?this.getList(this.conditionForm):(this.conditionForm.currentPage=1,this.hasSearch=!0)},getloanInstitution:function(){var t=this;this.$axios.post("/api/assignee/caseCollection/batch/getLoanInstitution",{}).then(function(e){0==e.data.code?(t.loanInstitution=e.data.data,t.loanInstitution.unshift({code:"",name:"All"})):t.$util.failCallback(e.data,t)}).catch(function(t){})},getbatchCode:function(){var t=this;this.$axios.post("/api/assignee/caseCollection/batch/getBatchCode",{loanInstitution:this.conditionForm.loanInstitution}).then(function(e){0==e.data.code?(t.batchCode=e.data.data,t.batchCode.unshift({code:"",name:"All"})):t.$util.failCallback(e.data,t)}).catch(function(t){})},getList:function(t){var e,i=this;e=t||this.conditionForm,this.loading=!0,this.$axios.post("/api/assignee/caseCollection/batch/getBatchData",e).then(function(t){0==t.data.code?(i.tb.data=t.data.data.items,i.total=t.data.data.totalNum):i.$util.failCallback(t.data,i),i.loading=!1}).catch(function(t){i.loading=!1})},changeSize:function(t){this.conditionForm.pageSize=t,this.searchForm.pageSize=t,1==this.conditionForm.currentPage?this.getList(this.conditionForm):(this.conditionForm.currentPage=1,this.getList(this.conditionForm))},changePage:function(t){this.conditionForm.currentPage=t,this.getList()},countDateChange:function(t){t?(this.conditionForm.countDateMin=t[0],this.conditionForm.countDateMax=t[1]):(this.conditionForm.countDateMin="",this.conditionForm.countDateMax="")},downloadTable:function(){var t=this,e=o()({},this.conditionForm);e.pageSize=this.total,e.currentPage=1,this.$axios({method:"post",url:"/api/assignee/caseCollection/batch/getBatchDataDownload",data:e,responseType:"blob"}).then(function(e){if("application/json"!=e.data.type){var i=e.data,a=new Blob([i]),n=decodeURI(e.headers["content-disposition"].split("=")[1]);if("download"in document.createElement("a")){var o=document.createElement("a");o.download=n,o.style.display="none",o.href=URL.createObjectURL(a),document.body.appendChild(o),o.click(),URL.revokeObjectURL(o.href),document.body.removeChild(o)}else navigator.msSaveBlob(a,n)}else t.$message({type:"error",message:"导出失败"})}).catch(function(t){})}}),l()(a,"created",function(){this.searchForm=o()({},this.conditionForm),this.getList(),this.getloanInstitution(),this.getbatchCode()}),a),u={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"content-body"},[t._m(0),t._v(" "),i("div",{staticClass:"bd-main"},[i("el-form",{attrs:{inline:!0,size:"mini"}},[i("el-form-item",{attrs:{label:"委案时间",prop:"batchCode"}},[i("el-date-picker",{attrs:{size:"mini","start-placeholder":"开始日期","end-placeholder":"结束日期",type:"daterange","value-format":"yyyy-MM-dd",format:"yyyy/MM/dd",placeholder:"选择日期",clearable:""},on:{change:t.countDateChange},model:{value:t.countDate,callback:function(e){t.countDate=e},expression:"countDate"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"贷款机构",prop:"loanInstitution"}},[i("el-select",{attrs:{placeholder:"请选择贷款机构",clearable:""},on:{change:t.getbatchCode},model:{value:t.conditionForm.loanInstitution,callback:function(e){t.$set(t.conditionForm,"loanInstitution",e)},expression:"conditionForm.loanInstitution"}},t._l(t.loanInstitution,function(t){return i("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"批次号",prop:"batchCode"}},[i("el-select",{attrs:{placeholder:"",filterable:"",clearable:""},model:{value:t.conditionForm.batchCode,callback:function(e){t.$set(t.conditionForm,"batchCode",e)},expression:"conditionForm.batchCode"}},t._l(t.batchCode,function(t){return i("el-option",{key:t.code,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),i("div",{staticClass:"el-col btnGroup"},[i("el-form-item",[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.search}},[t._v("\n              搜索\n            ")]),t._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:t.reset}},[t._v("\n              重置\n            ")])],1)],1)],1),t._v(" "),i("p",{staticClass:"exportTable"},[i("a",{staticClass:"el-icon-upload2",on:{click:t.downloadTable}},[t._v("导出EXCEL文件")])]),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",attrs:{height:"460",data:t.tb.data,"tooltip-effect":"dark","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","empty-text":"暂无数据","show-overflow-tooltip":""}},[i("el-table-column",{attrs:{type:"index",width:"50",label:"排名",align:"center",index:t.indexMethod}}),t._v(" "),t._l(t.tb.fields,function(t){return i("el-table-column",{key:t.id,attrs:{align:t.align||"left",prop:t.key,label:t.label,width:t.width}})})],2),t._v(" "),i("el-pagination",{attrs:{small:"","current-page":t.conditionForm.currentPage,"page-size":t.conditionForm.pageSize,layout:"sizes,total, prev, pager, next,jumper","page-sizes":[15,50,100],total:t.total},on:{"current-change":t.changePage,"update:currentPage":function(e){t.$set(t.conditionForm,"currentPage",e)},"size-change":t.changeSize}})],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bd-top"},[e("div",{staticClass:"md clearfix"},[e("div",{staticClass:"md-left"},[e("h5",[this._v("案件批次分析")])]),this._v(" "),e("div",{staticClass:"md-right"})])])}]};var m=i("vSla")(h,u,!1,function(t){i("ap0F")},null,null);e.default=m.exports},ap0F:function(t,e){}});