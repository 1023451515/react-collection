webpackJsonp([53],{VQBt:function(e,t){},kz4F:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("a3Yh"),n=a.n(i),s=(a("6iV/"),{components:{},data:function(){var e;return e={detailForm:{content:this.bus.announceData.content,ids:"",title:this.bus.announceData.title,accessory:this.bus.announceData.accessory},fileName:"",rules:{content:[{required:!0,message:"必填项",trigger:"blur,change"}],title:[{required:!0,message:"必填项",trigger:"blur,change"}]},fileList:[],formData:{},error:!1},n()(e,"rules",{}),n()(e,"treeLoading",!1),n()(e,"defaultProps",{children:"children",label:"name"}),n()(e,"treeData",[]),n()(e,"childrenIds",[]),e},computed:{},created:function(){this.getList(),this.formData=new FormData},methods:{downLoad:function(e){var t=this;this.$axios({method:"post",url:"/api/assignee/notice/downLoad",data:{name:e.name,url:e.url},responseType:"blob"}).then(function(e){if("application/json"!=e.data.type){var a=e.data,i=new Blob([a]),n=decodeURI(e.headers["content-disposition"].split("=")[1]);if("download"in document.createElement("a")){var s=document.createElement("a");s.download=n,s.style.display="none",s.href=URL.createObjectURL(i),document.body.appendChild(s),s.click(),URL.revokeObjectURL(s.href),document.body.removeChild(s)}else navigator.msSaveBlob(i,n)}else t.$message({type:"error",message:"下载失败"})})},getList:function(){var e=this;this.treeLoading=!0,this.$axios.post("/api/assignee/notice/sendToList",{id:this.bus.announceData.id}).then(function(t){0==t.data.code?(e.treeData=t.data.data.treeData,e.childrenIds=t.data.data.checkList,e.$refs.objectTree.setCheckedKeys(e.childrenIds),e.getchildrenIds(e.treeData)):e.$util.failCallback(t.data,e),e.treeLoading=!1}).catch(function(t){e.loading=!1})},getCheckedKeys:function(e,t,a){this.childrenIds=this.$refs.objectTree.getCheckedKeys(!0).join(",")},check:function(e){},getchildrenIds:function(e){var t=this;e.forEach(function(e){e.children&&e.children.length>0?(t.getchildrenIds(e.children),e.disabled=!0):e.disabled=!0})}}}),r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"content-body"},[e._m(0),e._v(" "),a("div",{staticClass:"bd-main"},[a("el-form",{ref:e.detailForm,attrs:{model:e.detailForm,"label-width":"120px",rules:e.rules,size:"mini"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:"公告标题",prop:"title"}},[a("el-input",{attrs:{placeholder:"",disabled:""},model:{value:e.detailForm.title,callback:function(t){e.$set(e.detailForm,"title",t)},expression:"detailForm.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"公告内容",prop:"content"}},[a("el-input",{attrs:{type:"textarea",placeholder:"",disabled:""},model:{value:e.detailForm.content,callback:function(t){e.$set(e.detailForm,"content",t)},expression:"detailForm.content"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"附件",prop:""}},e._l(this.detailForm.accessory,function(t,i){return a("p",[a("a",{key:t.id,staticClass:"el-button--text el-button--small",staticStyle:{"text-decoration":"underline"},attrs:{href:"javascript:void(0)"},on:{click:function(a){e.downLoad(t)}}},[e._v(" "+e._s(i+1)+". "+e._s(t.name))])])}))],1),e._v(" "),a("el-col",{attrs:{span:14}},[a("el-form-item",{attrs:{label:"公告对象",prop:""}},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading,expression:"treeLoading"}],ref:"objectTree",attrs:{"show-checkbox":"","default-expand-all":"","highlight-current":"","empty-text":"暂无数据","element-loading-text":"拼命加载中",data:e.treeData,props:e.defaultProps,"node-key":"id","expand-on-click-node":!1,"check-strictly":!1},on:{"check-change":e.getCheckedKeys,check:e.check}})],1)],1)],1)],1)],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"bd-top"},[t("div",{staticClass:"md clearfix"},[t("div",{staticClass:"md-left"},[t("h5",[this._v("公告详情")])]),this._v(" "),t("div",{staticClass:"md-right"})])])}]};var o=a("vSla")(s,r,!1,function(e){a("VQBt")},"data-v-00f83435",null);t.default=o.exports}});