webpackJsonp([50],{"0Gn/":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("HzJ8"),l=i.n(a),n=i("aA9S"),s=i.n(n),o={name:"visitRuleDialog",data:function(){return{conditionForm:{title:"",content:""}}},props:{itemData:{type:Object},visible:{type:Boolean}},methods:{dialogCloseHandle:function(){this.$refs.conditionForm.resetFields(),this.$emit("close")},dialogSubmitHandle:function(){var t,e,i=this;this.conditionForm.id?(t="/api/assignee/visitRule/updateRule",e="编辑成功"):(t="/api/assignee/visitRule/addRule",e="添加成功"),this.$axios.post(t,{title:this.conditionForm.title,content:this.conditionForm.content,id:this.conditionForm.id}).then(function(t){0==t.data.code?(i.$message.success(e),i.dialogCloseHandle(),i.$emit("refresh")):i.$util.failCallback(t.data,i)}).catch(function(t){})},close:function(){this.dialogCloseHandle()}},created:function(){this.conditionForm=s()({},this.itemData)}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{title:t.itemData.title?"外访守则详情":"添加外访守则",visible:t.visible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.visible=e},close:t.close}},[i("el-form",{ref:"conditionForm",staticClass:"dialog-main",attrs:{model:t.conditionForm,"label-width":"110px",size:"small"}},[i("el-form-item",{attrs:{label:"外访守则标题",prop:"title",rules:[{required:!0,message:"标题为必填项"}]}},[i("el-input",{attrs:{clearable:"",placeholder:"请输入外访守则标题"},model:{value:t.conditionForm.title,callback:function(e){t.$set(t.conditionForm,"title",e)},expression:"conditionForm.title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"外访守则内容",prop:"content",rules:[{required:!0,message:"内容为必填项"}]}},[i("el-input",{attrs:{type:"textarea",row:10,placeholder:"请输入外访守则内容"},model:{value:t.conditionForm.content,callback:function(e){t.$set(t.conditionForm,"content",e)},expression:"conditionForm.content"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog_submit"},[i("el-button",{attrs:{size:"small"},nativeOn:{click:function(e){return e.preventDefault(),t.dialogCloseHandle(e)}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){return e.preventDefault(),t.dialogSubmitHandle(e)}}},[t._v("提 交")])],1)],1)},staticRenderFns:[]},r={components:{visitRuleDialog:i("vSla")(o,c,!1,null,null,null).exports},data:function(){return{tb:{data:[],fields:[]},total:0,pageSize:15,loading:!1,currentPage:1,activeCode:[],selected:[],itemData:{},visible:!1}},methods:{getList:function(){var t=this;this.loading=!0,this.$axios.post("/api/assignee/visitRule/getRuleList",{}).then(function(e){0==e.data.code?(t.tb.data=e.data.data,t.total=e.data.data.totalNum):t.$util.failCallback(e.data,t),t.loading=!1}).catch(function(e){t.loading=!1})},handleSelectionChange:function(t){this.selected=[];var e=!0,i=!1,a=void 0;try{for(var n,s=l()(t);!(e=(n=s.next()).done);e=!0){var o=n.value;this.selected.push(o.id)}}catch(t){i=!0,a=t}finally{try{!e&&s.return&&s.return()}finally{if(i)throw a}}},changeStatus:function(t){var e=this,i=t.row.status?"/api/assignee/visitRule/close":"/api/assignee/visitRule/open";this.$axios.post(i,{id:t.row.id}).then(function(t){0==t.data.code?e.getList():e.$util.failCallback(t.data,e)}).catch(function(t){})},addRule:function(){this.itemData={},this.visible=!0},deleteRule:function(){var t=this;this.selected.length?this.$confirm("请确认是否删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$axios.post("/api/assignee/visitRule/deleteRule",{ids:t.selected}).then(function(e){0==e.data.code?(t.$message.success("删除成功"),t.getList()):t.$util.failCallback(e.data,t)}).catch(function(t){})}):this.$alert("请选择一条外访守则进行操作！","提示",{confirmButtonText:"确定"})},detail:function(t){this.itemData=t.row,this.visible=!0},close:function(){this.visible=!1},refresh:function(){this.getList()}},created:function(){this.getList()}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content-body"},[t._m(0),t._v(" "),i("div",{staticClass:"bd-main"},[i("div",{staticClass:"btnGp"},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.addRule}},[t._v("添加")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"danger"},on:{click:t.deleteRule}},[t._v("删除")])],1),t._v(" "),i("div",{staticClass:"table"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",attrs:{height:"700","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading",data:t.tb.data,"tooltip-effect":"dark","empty-text":"暂无数据"},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"100",fixed:"left"}}),t._v(" "),i("el-table-column",{attrs:{prop:"title",label:"外访守则标题",align:"left"}}),t._v(" "),i("el-table-column",{attrs:{label:"启用状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{"active-value":"1","inactive-value":"0","active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(i){t.changeStatus(e)}},model:{value:e.row.status+"",callback:function(i){t.$set(e.row,"status+''",i)},expression:"scope.row.status+''"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"createTime",label:"添加时间",align:"left"}}),t._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"查看详情",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){t.detail(e)}}},[t._v("编辑")])]}}])})],1)],1)]),t._v(" "),t.visible?i("visitRuleDialog",{attrs:{itemData:t.itemData,visible:t.visible},on:{close:t.close,refresh:t.refresh}}):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bd-top"},[e("div",{staticClass:"md clearfix"},[e("div",{staticClass:"md-left"},[e("h5",[this._v("外访守则设置")])]),this._v(" "),e("div",{staticClass:"md-right"})])])}]};var u=i("vSla")(r,d,!1,function(t){i("EpRZ")},"data-v-0d21740b",null);e.default=u.exports},EpRZ:function(t,e){}});