webpackJsonp([10],{"8QlM":function(t,i){},CKIY:function(t,i){},"Mnh/":function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("aA9S"),o=e.n(a),n=e("XBA1"),s=e("HzJ8"),r=e.n(s),l=[{key:" productTypeName",label:"产品类型",width:"150"},{key:"strategy",label:"策略",width:"auto"}],c={name:"strategyDialog",props:{dialogVisible:{type:Boolean},id:{},status:{type:String}},data:function(){return{option:"",conditionForm:[],tb:{data:[],fields:l},change:!1}},methods:{handleClose:function(t){this.$emit("closeDialog",t)},getDropdownData:function(){var t=this;this.$axios.post("/api/assignee/setup/initQueryStrategyConfigure",{strategyConfigureId:this.id,configureStatus:this.status}).then(function(i){if(0==i.data.code){for(var e in t.conditionForm=[],t.tb.data=i.data.data,t.tb.data){t.tb.data[e].index=e;var a={productType:t.tb.data[e].productType,productTypeName:t.tb.data[e].productTypeName,strategyId:"",id:""};t.conditionForm.push(a)}t.getList()}else t.$util.failCallback(i.data,t)}).catch(function(t){})},getList:function(){var t=this;this.$axios.post("/api/assignee/setup/queryStrategyConfigure",{strategyConfigureId:this.id}).then(function(i){if(0==i.data.code){var e=!0,a=!1,o=void 0;try{for(var n,s=r()(i.data.data);!(e=(n=s.next()).done);e=!0){var l=n.value;for(var c in t.conditionForm)t.conditionForm[c].productType===l.productType&&(t.conditionForm[c].id=l.id,t.conditionForm[c].strategyId=null==l.strategy.code?"":l.strategy.code)}}catch(t){a=!0,o=t}finally{try{!e&&s.return&&s.return()}finally{if(a)throw o}}}else t.$util.failCallback(i.data,t)}).catch(function(t){})},submit:function(){var t=this;this.$axios.post("/api/assignee/setup/saveStrategyConfigure",{strategyConfigureBean:this.conditionForm,strategyConfigureId:this.id}).then(function(i){0==i.data.code?(t.$message.success("修改成功"),t.change=!0,t.handleClose(t.change)):t.$util.failCallback(i.data,t)}).catch(function(t){})},changeOption:function(){}},created:function(){this.getDropdownData()}},d={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"strategy_set"},[e("el-dialog",{attrs:{title:"策略配置",visible:t.dialogVisible,width:"40%","before-close":t.handleClose,"close-on-click-modal":!1,"show-close":!0},on:{"update:visible":function(i){t.dialogVisible=i}}},[e("div",{staticStyle:{margin:"0 auto"}},[e("div",{staticClass:"table"},[e("el-table",{ref:"multipleTable",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading",data:t.tb.data,"tooltip-effect":"dark","empty-text":"暂无数据"}},[e("el-table-column",{attrs:{align:"center",label:"产品类型",width:"200"},scopedSlots:t._u([{key:"default",fn:function(i){return[t._v("\n                "+t._s(i.row.productTypeName)+" \n            ")]}}])}),t._v(" "),e("el-table-column",{attrs:{align:"center",label:"策略",width:"auto"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-select",{attrs:{size:"mini",placeholder:"系统默认策略"},model:{value:t.conditionForm[i.row.index].strategyId,callback:function(e){t.$set(t.conditionForm[i.row.index],"strategyId",e)},expression:"conditionForm[props.row.index].strategyId"}},t._l(i.row.strategy,function(i){return e("el-option",{key:i.id,attrs:{label:i.name,value:i.code},on:{change:t.changeOption}})}))]}}])})],1)],1),t._v(" "),e("div",{staticStyle:{"text-align":"right",margin:"20px 0 0 0"}},[e("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.submit}},[t._v("提交")])],1)])])],1)},staticRenderFns:[]};var u=e("vSla")(c,d,!1,function(t){e("8QlM")},"data-v-b9208a04",null).exports,g=[{key:"loanInstitution",label:"贷款机构",width:"auto"},{key:"configureStatusName",label:"配置状态",width:"auto"}],h={data:function(){return{conditionForm:{configureStatus:null,loanInstitution:null,currentPage:1,pageSize:15},searchForm:{},hasSearch:!1,tb:{data:[],fields:g},loading:!1,total:0,dropDownData:{configureStatus:[],loanInstitution:[]},dialogVisible:!1,id:"",status:""}},components:{pagination:n.a,strategyDialog:u},methods:{reset:function(){this.$refs.conditionForm.resetFields(),this.searchForm=o()({},this.conditionForm),1==this.conditionForm.currentPage?this.getList(this.conditionForm):(this.conditionForm.currentPage=1,this.hasSearch=!0)},search:function(){var t=this;this.$refs.conditionForm.validate(function(i){i&&(t.searchForm=o()({},t.conditionForm),1==t.conditionForm.currentPage?t.getList(t.conditionForm):(t.conditionForm.currentPage=1,t.hasSearch=!0))})},getList:function(t){var i,e=this;for(var a in i=t||this.conditionForm,this.loading=!0,i=o()({},i))""===i[a]&&delete i[a];this.$axios.post("/api/assignee/setup/strategyConfigureList",i).then(function(t){e.loading=!1,0==t.data.code?(e.tb.data=t.data.data.items,e.total=t.data.data.totalNum):e.$util.failCallback(t.data,e),e.loading=!1}).catch(function(t){e.loading=!1})},changeSize:function(t){this.conditionForm.pageSize=t,this.searchForm.pageSize=t,1==this.conditionForm.currentPage?this.getList(this.conditionForm):(this.conditionForm.currentPage=1,this.getList(this.conditionForm))},changePage:function(t){this.searchForm.currentPage=t,this.hasSearch?(this.getList(this.conditionForm),this.hasSearch=!1):(this.conditionForm=o()({},this.searchForm),this.getList(this.searchForm))},getDropData:function(){var t=this;this.$axios.post("/api/assignee/setup/initStrategyConfigure",{}).then(function(i){0==i.data.code?(t.dropDownData.configureStatus=i.data.data.configureStatus,t.dropDownData.loanInstitution=i.data.data.loanInstitution):t.$util.failCallback(i.data,t)}).catch(function(t){})},setRow:function(t){this.id=t.row.strategyConfigureId,this.status=t.row.configureStatus,this.dialogVisible=!0},closeDialog:function(t){this.dialogVisible=!1,t&&this.getList()}},created:function(){this.$route.query.configureStatus&&(this.conditionForm.configureStatus=this.$util.decrypt(this.$route.query.configureStatus,"message")),this.searchForm=o()({},this.conditionForm),this.getDropData(),this.getList(this.conditionForm)}},f={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"content-body"},[t._m(0),t._v(" "),e("div",{staticClass:"bd-main "},[e("el-form",{ref:"conditionForm",staticClass:"condition-form",attrs:{model:t.conditionForm,"label-width":"60px","label-position":"right",size:"mini"}},[e("div",{staticClass:"el-col fixed-width"},[e("el-form-item",{attrs:{label:"贷款机构",prop:"loanInstitution"}},[e("el-select",{attrs:{clearable:""},model:{value:t.conditionForm.loanInstitution,callback:function(i){t.$set(t.conditionForm,"loanInstitution",i)},expression:"conditionForm.loanInstitution"}},t._l(t.dropDownData.loanInstitution,function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.code}})}))],1)],1),t._v(" "),e("div",{staticClass:"el-col fixed-width"},[e("el-form-item",{attrs:{label:"配置状态",prop:"configureStatus"}},[e("el-select",{attrs:{clearable:""},model:{value:t.conditionForm.configureStatus,callback:function(i){t.$set(t.conditionForm,"configureStatus",i)},expression:"conditionForm.configureStatus"}},t._l(t.dropDownData.configureStatus,function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.code}})}))],1)],1),t._v(" "),e("div",{staticClass:"el-col  form-btns"},[e("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.search}},[t._v("搜索")]),t._v(" "),e("el-button",{attrs:{size:"mini"},on:{click:t.reset}},[t._v("重置")])],1)]),t._v(" "),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",attrs:{height:"700","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading",data:t.tb.data,"tooltip-effect":"dark","empty-text":"暂无数据"}},[t._l(t.tb.fields,function(t){return e("el-table-column",{key:t.id,attrs:{align:t.align||"left",prop:t.key,label:t.label,width:t.width}})}),t._v(" "),e("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(i){return[e("el-button",{attrs:{size:"mini"},on:{click:function(e){t.setRow(i)}}},[t._v("配置")])]}}])})],2)],1),t._v(" "),e("pagination",{attrs:{total:t.total,pageSize:t.conditionForm.pageSize,"current-page":t.conditionForm.currentPage},on:{changePage:t.changePage,changeSize:t.changeSize}}),t._v(" "),t.dialogVisible?e("strategyDialog",{attrs:{id:t.id,dialogVisible:t.dialogVisible,status:t.status},on:{closeDialog:t.closeDialog}}):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"bd-top"},[i("div",{staticClass:"md clearfix"},[i("div",{staticClass:"md-left"},[i("h5",[this._v("策略设置")])]),this._v(" "),i("div",{staticClass:"md-right"})])])}]};var m=e("vSla")(h,f,!1,function(t){e("CKIY")},"data-v-cf03bc0a",null);i.default=m.exports}});