webpackJsonp([40],{dSdT:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("aA9S"),n=i.n(a),o=[{key:"taskId",label:"任务编号",width:"auto",type:"0"},{key:"startDateName",label:"开始时间",width:"150",type:"0"},{key:"taskCount",label:"任务量",width:"",type:"0"},{key:"successCount",label:"接通量",width:"",type:"0"},{key:"successPercent",label:"接通率",width:"",type:"0"},{key:"statusName",label:"状态",width:"",type:"0"},{key:"createDateName",label:"创建时间",width:"150",type:"0"}],s={components:{},computed:{},created:function(){this.$route.path.slice(1);this.searchForm=n()({},this.conditionForm),this.getList(this.conditionForm),this.getdropdownData()},data:function(){return{conditionForm:{startDate:"",taskStatus:"",currentPage:1,pageSize:15},tb:{data:[],fields:o},loading:!0,total:0,dropdownData:{status:[]},rules:{}}},methods:{search:function(){var t=this;this.$refs.conditionForm.validate(function(e){e&&(t.searchForm=n()({},t.conditionForm),1==t.conditionForm.currentPage?t.getList(t.conditionForm):(t.conditionForm.currentPage=1,t.getList(t.conditionForm),t.hasSearch=!0))})},reset:function(){this.$refs.conditionForm.resetFields(),this.searchForm=n()({},this.conditionForm),1==this.conditionForm.currentPage?this.getList(this.conditionForm):(this.conditionForm.currentPage=1,this.getList(this.conditionForm),this.hasSearch=!0)},handleCurrentChange:function(t){this.searchForm.currentPage=t,this.hasSearch?(this.getList(this.conditionForm),this.hasSearch=!1):(this.conditionForm=n()({},this.searchForm),this.getList(this.searchForm))},goDetail:function(t){var e=this.$util.encrypt(t.id,"call"),i=(window.location.origin?window.location.origin:"")+"/#/assignee_call_task_detail?taskId="+e;window.open(i)},getdropdownData:function(){var t=this;this.$axios.post("/api/assignee/proactiveCallManage/queryPredictiveCallTaskConditionInit",{}).then(function(e){0==e.data.code?t.dropdownData.status=e.data.data:t.$util.failCallback(e.data,t)}).catch(function(t){})},getList:function(t){var e,i=this;e=t||this.conditionForm,this.loading=!0,this.$axios.post("/api/assignee/proactiveCallManage/queryPreCallTaskCondition",e).then(function(t){0==t.data.code?(i.tb.data=t.data.data.items,i.total=t.data.data.totalNum):i.$util.failCallback(t.data,i),i.loading=!1}).catch(function(t){i.loading=!1})},changeSize:function(t){this.conditionForm.pageSize=t,this.searchForm.pageSize=t,1==this.conditionForm.currentPage?this.getList(this.conditionForm):(this.conditionForm.currentPage=1,this.getList(this.conditionForm))},handleSelectionChange:function(t){},changeTaskStatus:function(t,e,i){var a=this;this.$confirm(i,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$axios.post("/api/assignee/proactiveCallManage/changeTaskStatus",{id:t,status:e}).then(function(t){0==t.data.code?(a.$message.success("操作成功"),a.getList(a.conditionForm)):a.$util.failCallback(t.data,a)}).catch(function(t){})})}}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"content-body"},[t._m(0),t._v(" "),i("div",{staticClass:"bd-main"},[i("el-form",{ref:"conditionForm",staticClass:"condition-form",attrs:{model:t.conditionForm,"label-width":this.$util.LABEL_WIDTH,"label-position":"right",size:"mini"}},[i("div",{staticClass:"el-col fixed-width"},[i("el-form-item",{attrs:{label:"开始时间",prop:"startDate"}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"","value-format":"yyyy-MM-dd"},model:{value:t.conditionForm.startDate,callback:function(e){t.$set(t.conditionForm,"startDate",e)},expression:"conditionForm.startDate"}})],1)],1),t._v(" "),i("div",{staticClass:"el-col fixed-width"},[i("el-form-item",{attrs:{label:"状态",prop:"taskStatus"}},[i("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.conditionForm.taskStatus,callback:function(e){t.$set(t.conditionForm,"taskStatus",e)},expression:"conditionForm.taskStatus"}},t._l(t.dropdownData.status,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.code}})}))],1)],1),t._v(" "),i("div",{staticClass:"el-col fixed-width form-btns"},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.search}},[t._v("搜索")]),t._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:t.reset}},[t._v("重置")])],1)]),t._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",attrs:{data:t.tb.data,"tooltip-effect":"dark","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","show-overflow-tooltip":""},on:{"selection-change":t.handleSelectionChange,"row-click":function(e){return e.target!==e.currentTarget?null:t.goDetail(e)}}},[t._l(t.tb.fields,function(e){return i("el-table-column",{key:e.id,attrs:{align:e.align||"left",prop:e.key,label:e.label,width:e.width},scopedSlots:t._u([{key:"default",fn:function(a){return["0"==e.type?[t._v("\n              "+t._s(a.row[a.column.property])+"\n            ")]:t._e(),t._v(" "),"1"==e.type?[i("el-button",{attrs:{size:"mini",type:"text"},nativeOn:{click:function(t){t.preventDefault()}}},[t._v("\n                "+t._s(a.row[a.column.property])+"\n              ")])]:t._e(),t._v(" "),"2"==e.type?[i("a",{staticClass:"el-button--text el-button--small",staticStyle:{"text-decoration":"underline"},attrs:{href:"javascript:void(0)"}},[t._v(t._s(a.row[a.column.property]))])]:t._e()]}}])})}),t._v(" "),i("el-table-column",{attrs:{width:"150",label:"操作",align:"left",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.status?[i("el-button",{attrs:{size:"mini"},on:{click:function(i){i.stopPropagation(),i.preventDefault(),t.changeTaskStatus(e.row.id,"0","此操作将终止该任务, 是否继续?")}}},[t._v("\n                  取消\n              ")])]:t._e(),t._v(" "),1==e.row.status?[i("el-button",{attrs:{size:"mini"},on:{click:function(i){i.stopPropagation(),i.preventDefault(),t.changeTaskStatus(e.row.id,"1","此操作将暂停该任务, 是否继续?")}}},[t._v("\n                  暂停\n              ")]),t._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:function(i){i.stopPropagation(),i.preventDefault(),t.changeTaskStatus(e.row.id,"0","此操作将终止该任务, 是否继续?")}}},[t._v("\n                  终止\n              ")])]:t._e(),t._v(" "),2==e.row.status?[i("el-button",{attrs:{size:"mini",disabled:""}},[t._v("\n                  已完成\n              ")])]:t._e(),t._v(" "),3==e.row.status?[i("el-button",{attrs:{size:"mini"},on:{click:function(i){i.stopPropagation(),i.preventDefault(),t.changeTaskStatus(e.row.id,"2","此操作将继续执行该任务, 是否继续?")}}},[t._v("\n                  继续\n              ")]),i("el-button",{attrs:{size:"mini"},on:{click:function(i){i.stopPropagation(),i.preventDefault(),t.changeTaskStatus(e.row.id,"0","此操作将终止该任务, 是否继续?")}}},[t._v("\n                  终止\n              ")])]:t._e(),t._v(" "),4==e.row.status?[i("el-button",{attrs:{size:"mini",disabled:""}},[t._v("\n                  已终止\n              ")])]:t._e(),t._v(" "),5==e.row.status?[i("el-button",{attrs:{size:"mini",disabled:""}},[t._v("\n                  执行出错\n              ")])]:t._e()]}}])})],2),t._v(" "),i("el-pagination",{attrs:{small:"",total:t.total,"current-page":t.conditionForm.currentPage,"page-size":t.conditionForm.pageSize,layout:"sizes,total, prev, pager, next,jumper","page-sizes":[15,50,100]},on:{"update:currentPage":function(e){t.$set(t.conditionForm,"currentPage",e)},"current-change":t.handleCurrentChange,"size-change":t.changeSize}})],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bd-top"},[e("div",{staticClass:"md clearfix"},[e("div",{staticClass:"md-left"},[e("h5",[this._v("预测式外呼任务")])]),this._v(" "),e("div",{staticClass:"md-right"})])])}]};var l=i("vSla")(s,r,!1,function(t){i("lpxN")},null,null);e.default=l.exports},lpxN:function(t,e){}});