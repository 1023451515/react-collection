webpackJsonp([14],{"0gUx":function(t,e){},ePOu:function(t,e){},zMJj:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("aA9S"),i=a.n(o),n=(a("9rMa"),{name:"note",props:{note:Object},data:function(){return{}},computed:{},created:function(){},methods:{goDetail:function(t){var e=this.$util.encrypt(t.caseCode+"_"+t.caseId.toString()+"_"+t.caseManageId.toString(),"caseDetail"),a=(window.location.origin?window.location.origin:"")+"/#/worker_case_detail?id="+e;window.open(a)}}}),l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"note-main"},[a("el-card",[a("div",{class:{"note-read":Boolean(t.note.memorandumStatus)}},[a("p",{staticClass:"note-time"},[t._v("创建时间："+t._s(t.note.createDate))]),t._v(" "),a("i",{staticClass:"el-icon-bell note-icon"}),t._v(" "),a("span",{staticClass:"note-title"},[t._v(t._s(t.note.title))]),t._v(" "),1==t.note.type?a("p",{staticClass:"note-content"},[a("a",{staticClass:"el-button--text el-button--small",class:{"note-read":Boolean(t.note.memorandumStatus)},staticStyle:{"text-decoration":"underline"},attrs:{href:"javascript:void(0)"},on:{click:function(e){t.goDetail(t.note)}}},[t._v(t._s(t.note.content))])]):0==t.note.type?a("p",{staticClass:"note-content"},[t._v("\n        "+t._s(t.note.content)+"\n      ")]):t._e()])])],1)},staticRenderFns:[]};var s={components:{myNote:a("vSla")(n,l,!1,function(t){a("0gUx")},"data-v-fd48e976",null).exports},data:function(){return{conditionForm:{currentPage:1,pageSize:15},isShow:!0,total:0,operationBtns:[{name:"查看",identifier:"sponsor_position_search",isShow:!0},{name:"添加备忘",identifier:"sponsor_position_create",dialog:{dialogFormVisible:!1,form:{content:"",remindDate:"",repetitionWay:"",title:"",memoType:0},rule:{},formName:"createForm",url:"/api/assignee/memo/addMemo",title:"添加备忘"},isShow:!1},{name:"编辑",identifier:"sponsor_position_update",dialog:{dialogFormVisible:!1,form:{id:"",content:"",remindDate:"",repetitionWay:"",title:""},rule:{},formName:"editForm",url:"/api/assignee/memo/updateMemo",title:"修改"},isShow:!0},{name:"删除",identifier:"sponsor_position_delete",form:{id:""},url:"/api/assignee/memo/deleteMemo",isShow:!1}],tb:{fields:null,data:[]},currentPage:1,loading:!0,dropdownData:{},pickerOptions0:{disabledDate:function(t){return t.getTime()<Date.now()-864e5}}}},created:function(){this.$route.path.slice(1);this.getList(this.conditionForm),this.getdropdownData()},methods:{ceshi:function(){this.$store.dispatch("timerChange",{interval:0,_this:this}),this.$store.dispatch("newNotesChange",[{id:110,collectionMarkId:null,title:"承诺还款",remindDate:"2018/05/18 13:58",repetitionWay:0,repetitionWayName:"永不",content:"用户【吴光强】承诺还款，还款时间【2018-05-30 00:00:00】，还款金额【1222】，对应案件【18000020】。",createDate:"2018/05/16 15:51",updateDate:null,memorandumStatus:0,caseId:438,caseManageId:217,caseCode:"1800000110",type:1},{id:110,collectionMarkId:null,title:"承诺还款",remindDate:"2018/05/18 13:58",repetitionWay:0,repetitionWayName:"永不",content:"用户【吴光强】承诺还款，还款时间【2018-05-30 00:00:00】，还款金额【1222】，对应案件【18000020】。",createDate:"2018/05/16 15:51",updateDate:null,memorandumStatus:0,caseId:438,caseManageId:217,caseCode:"1800000110",type:1}])},getdropdownData:function(){var t=this;this.$axios.post("/api/assignee/memo/getRepetitionWay",{}).then(function(e){0==e.data.code?t.dropdownData=e.data.data:t.$util.failCallback(e.data,t)}).catch(function(t){})},getList:function(t){var e=this;this.loading=!0,this.$axios.post("/api/assignee/memo/getMemoList",t).then(function(t){0==t.data.code?(e.tb.data=t.data.data.items,e.total=t.data.data.totalNum,e.loading=!1):e.$util.failCallback(t.data,e),e.loading=!1}).catch(function(t){e.loading=!1})},changeSize:function(t){this.conditionForm.pageSize=t,this.getList(this.conditionForm)},handleSizeChange:function(){},handleCurrentChange:function(){this.getList(this.conditionForm)},openCreateDialog:function(t){void 0!==this.$refs[t.dialog.formName]&&this.$refs[t.dialog.formName].resetFields(),t.dialog.dialogFormVisible=!0},openEditDialog:function(t,e){this.tempRow=i()({},e),t.dialog.dialogFormVisible=!0,t.dialog.form=this.tempRow,t.dialog.form.remindDate=moment(e.remindDate).format("YYYY-MM-DD HH:mm")},remindDateChange:function(t){},dialogSubmitHandle:function(t){var e=this;this.$refs[t.dialog.formName].validate(function(a){a&&e.$axios.post(t.dialog.url,e.$util.encodePostBody(t.dialog.form)).then(function(a){0==a.data.code?(1==a.data.data.has&&(e.$store.dispatch("timerChange",{interval:a.data.data.timeForRemind,_this:e}),e.$store.dispatch("newNotesChange",a.data.data.info)),t.dialog.dialogFormVisible=!1,e.getList(e.conditionForm),e.$message({type:"success",message:a.data.msg})):e.$util.failCallback(a.data,e)}).catch(function(t){})})},deleteHandle:function(t,e){var a=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.form.id=e.id,a.$axios.post(t.url,a.$util.encodePostBody(t.form)).then(function(t){0==t.data.code?(1==t.data.data.has?(a.$store.dispatch("timerChange",{interval:t.data.data.timeForRemind,_this:a}),a.$store.dispatch("newNotesChange",t.data.data.info)):a.$store.commit("REMOVE_TIMER"),a.getList(a.conditionForm),a.$message({type:"success",message:t.data.msg})):a.$util.failCallback(t.data,a)},function(t){})}).catch(function(){})},dialogCloseHandle:function(t){t.dialog.dialogFormVisible=!1},goDetail:function(t){var e=this.$util.encrypt(t.caseCode+"_"+t.caseId.toString()+"_"+t.caseManageId.toString(),"caseDetail"),a=(window.location.origin?window.location.origin:"")+"/#/worker_case_detail?id="+e;window.open(a)}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"content-body"},[a("div",{staticClass:"bd-top"},[a("div",{staticClass:"md clearfix"},[t._m(0),t._v(" "),a("div",{staticClass:"md-right"},[a("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(e){e.preventDefault(),t.openCreateDialog(t.operationBtns[1])}}},[t._v(t._s(t.operationBtns[1].name))])],1)])]),t._v(" "),a("div",{staticClass:"bd-main"},[t._l(t.tb.data,function(e){return a("div",{staticClass:"note-wrap"},[a("div",{staticClass:"note-left"},[a("my-note",{attrs:{note:e}})],1),t._v(" "),a("div",{staticClass:"note-btns"},[a("el-button",{attrs:{disabled:0!=e.memorandumStatus,type:"text",icon:"el-icon-edit",size:"large"},nativeOn:{click:function(a){a.preventDefault(),t.openEditDialog(t.operationBtns[2],e)}}}),t._v(" "),a("el-button",{attrs:{type:"text",icon:"el-icon-delete",size:"large"},nativeOn:{click:function(a){a.preventDefault(),t.deleteHandle(t.operationBtns[3],e)}}})],1)])}),t._v(" "),a("el-pagination",{attrs:{small:"","current-page":t.conditionForm.currentPage,"page-size":t.conditionForm.pageSize,layout:"sizes,total, prev, pager, next,jumper","page-sizes":[15,50,100],total:t.total},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.conditionForm,"currentPage",e)},"size-change":t.changeSize}})],2),t._v(" "),a("el-dialog",{attrs:{title:t.operationBtns[1].dialog.title,visible:t.operationBtns[1].dialog.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.$set(t.operationBtns[1].dialog,"dialogFormVisible",e)}}},[a("el-form",{ref:t.operationBtns[1].dialog.formName,staticClass:"dialog-main",attrs:{model:t.operationBtns[1].dialog.form,"label-width":"100px",rules:t.operationBtns[1].dialog.rule,size:"small"}},[a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{attrs:{"auto-complete":"off",clearable:"",size:"small",placeholder:"请输入标题"},model:{value:t.operationBtns[1].dialog.form.title,callback:function(e){t.$set(t.operationBtns[1].dialog.form,"title",e)},expression:"operationBtns[1].dialog.form.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"提醒时间",prop:"remindDate",size:"small"}},[a("el-date-picker",{attrs:{"picker-options":t.pickerOptions0,type:"datetime",placeholder:"选择","value-format":"yyyy-MM-dd HH:mm",format:"yyyy/MM/dd HH:mm",clearable:""},model:{value:t.operationBtns[1].dialog.form.remindDate,callback:function(e){t.$set(t.operationBtns[1].dialog.form,"remindDate",e)},expression:"operationBtns[1].dialog.form.remindDate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"重复",prop:"repetitionWay"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:"",size:"small"},model:{value:t.operationBtns[1].dialog.form.repetitionWay,callback:function(e){t.$set(t.operationBtns[1].dialog.form,"repetitionWay",e)},expression:"operationBtns[1].dialog.form.repetitionWay"}},t._l(t.dropdownData,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"content"}},[a("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入",clearable:"",size:"small"},model:{value:t.operationBtns[1].dialog.form.content,callback:function(e){t.$set(t.operationBtns[1].dialog.form,"content",e)},expression:"operationBtns[1].dialog.form.content"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog_submit"},[a("el-button",{attrs:{size:"small"},nativeOn:{click:function(e){e.preventDefault(),t.dialogCloseHandle(t.operationBtns[1])}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){e.preventDefault(),t.dialogSubmitHandle(t.operationBtns[1])}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.operationBtns[2].dialog.title,visible:t.operationBtns[2].dialog.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.$set(t.operationBtns[2].dialog,"dialogFormVisible",e)}}},[a("el-form",{ref:t.operationBtns[2].dialog.formName,staticClass:"dialog-main",attrs:{model:t.operationBtns[2].dialog.form,"label-width":"100px",rules:t.operationBtns[2].dialog.rule,size:"small"}},[a("el-form-item",{attrs:{label:"标题",prop:"title"}},[a("el-input",{attrs:{"auto-complete":"off",clearable:"",disabled:1==t.operationBtns[2].dialog.form.type,size:"small"},model:{value:t.operationBtns[2].dialog.form.title,callback:function(e){t.$set(t.operationBtns[2].dialog.form,"title",e)},expression:"operationBtns[2].dialog.form.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"提醒时间",prop:"remindDate"}},[a("el-date-picker",{attrs:{"picker-options":t.pickerOptions0,type:"datetime",placeholder:"选择","value-format":"yyyy-MM-dd HH:mm",format:"yyyy/MM/dd HH:mm",clearable:"",size:"small"},on:{change:t.remindDateChange},model:{value:t.operationBtns[2].dialog.form.remindDate,callback:function(e){t.$set(t.operationBtns[2].dialog.form,"remindDate",e)},expression:"operationBtns[2].dialog.form.remindDate"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"重复",prop:"repetitionWay"}},[a("el-select",{attrs:{placeholder:"请选择",clearable:"",size:"small"},model:{value:t.operationBtns[2].dialog.form.repetitionWay,callback:function(e){t.$set(t.operationBtns[2].dialog.form,"repetitionWay",e)},expression:"operationBtns[2].dialog.form.repetitionWay"}},t._l(t.dropdownData,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.code}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"content"}},[a("el-input",{attrs:{type:"textarea",size:"small",autosize:"",placeholder:"请输入",clearable:"",disabled:1==t.operationBtns[2].dialog.form.type},model:{value:t.operationBtns[2].dialog.form.content,callback:function(e){t.$set(t.operationBtns[2].dialog.form,"content",e)},expression:"operationBtns[2].dialog.form.content"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog_submit"},[a("el-button",{attrs:{size:"small"},nativeOn:{click:function(e){e.preventDefault(),t.dialogCloseHandle(t.operationBtns[2])}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},nativeOn:{click:function(e){e.preventDefault(),t.dialogSubmitHandle(t.operationBtns[2])}}},[t._v("提 交")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"md-left"},[e("h5",[this._v("我的备忘")])])}]};var d=a("vSla")(s,r,!1,function(t){a("ePOu")},"data-v-03a8f6b4",null);e.default=d.exports}});