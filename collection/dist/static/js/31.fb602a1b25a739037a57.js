webpackJsonp([31],{"2VHm":function(t,e){},p7JK:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("azh2"),s=a("XBA1"),o=a("6iV/"),n=a.n(o),l=[{key:"applyTime",label:"提交时间",width:"150"},{key:"applicantName",label:"申请人",width:"80"},{key:"gtasksTypeName",label:"类型",width:"100"}],r=[{key:"applyTime",label:"提交时间",width:"150"},{key:"applicantName",label:"申请人",width:"80"},{key:"latestDebtMoney",label:"最新欠款金额",width:"",align:"right"},{key:"statementAmount",label:"声明欠款金额",width:"",align:"right"},{key:"checkAmount",label:"对账欠款金额",width:"",align:"right"}],c={components:{MyTabs:i.a,pagination:s.a},data:function(){return{chargeShow:!1,statusList:[{code:"0",name:"全部待办",count:0},{code:"1",name:"未完成",count:0},{code:"2",name:"已完成",count:0}],tabIndex:0,tabList:[{index:0,name:"全部类型",type:0},{index:1,name:"申请外访",type:1},{index:2,name:"申请函件",type:2},{index:3,name:"申请公安协催",type:3}],comTb:[],tb:{data:[],fields:l,OperationBtn:[{type:"primary",size:"mini",key:"0",name:"同意",operateAbled:!1,param:"approveStatus",isShow:!1,typekey:1},{type:"warning",size:"mini",key:"0",name:"驳回",param:"approveStatus",isShow:!1,typekey:2}]},tb2:{data:[],fields:r,OperationBtn:[{type:"primary",size:"mini",key:"0",name:"编辑",param:"approveStatus",isShow:!1},{type:"text",size:"mini",key:"1",name:"已对账",param:"approveStatus",isShow:!1}]},loading:!1,total:0,dialogVisible:!1,dialogForm:{caseCode:"",borrowerName:"",borrowerIdnumber:"",latestDebtMoney:"",statementAmount:"",checkAmount:"",id:""},rules:{checkAmount:[{required:!0,examine:"对账欠款金额不能为空",trigger:"blur"},{pattern:/^[1-9][0-9]{0,9}([.][0-9]{0,2})?$/,examine:"金额为十位数字且最多两位小数",trigger:"blur"}]}}},computed:{queryParams:function(){return{currentPage:1,pageSize:15,searchType:0,gtasksType:0}}},created:function(){var t=this,e={identifier:this.$route.path.slice(1)};this.$axios.post("/api/assignee/currentUser/getPageResourceByMenu",n.a.stringify(e)).then(function(e){if(0==e.data.code)switch(e.data.data[0].identifier){case"assignee_examine_approve_manager":t.getList(t.queryParams),t.chargeShow=!0;break;case"assignee_examine_approve_staff":t.tabList=[{index:0,name:"申请对账",type:0}],t.comTb=t.tb2,t.getList2(t.queryParams)}else t.$util.failCallback(e.data,t)}).catch(function(t){}),this.comTb=this.tb},methods:{changeTab:function(t){this.tabIndex=t.index,this.queryParams.gtasksType=t.type,this.getList(this.queryParams)},getNumberList:function(){var t=this;this.$axios.post("/api/assignee/gtasks/getGtasksCountsApprove",{}).then(function(e){0==e.data.code?(t.statusList[0].count=e.data.data.total,t.statusList[1].count=e.data.data.unfinished,t.statusList[2].count=e.data.data.finished):t.$util.failCallback(e.data,t)}).catch(function(e){t.loading=!1})},getNumberList2:function(){var t=this;this.$axios.post("/api/assignee/gtasks/getGtasksCountsCheckBill",{}).then(function(e){0==e.data.code?(t.totalNumber=e.data.data.total,t.unfinishedNumber=e.data.data.unfinished,t.finishedNumber=e.data.data.finished):t.$util.failCallback(e.data,t)}).catch(function(e){t.loading=!1})},getList:function(t){var e=this;this.getNumberList(),this.loading=!0,this.$axios.post("/api/assignee/gtasks/getGtasksListApprove",t).then(function(t){e.loading=!1,0==t.data.code?(e.tb.data=t.data.data.items,e.total=t.data.data.totalNum):e.$util.failCallback(t.data,e)}).catch(function(t){e.loading=!1})},changeSize:function(t){this.queryParams.pageSize=t,this.getList(this.queryParams)},getList2:function(t){var e=this;this.getNumberList2(),this.loading=!0,this.$axios.post("/api/assignee/gtasks/getGtasksListCheckBill",t).then(function(t){e.loading=!1,0==t.data.code?(e.tb2.data=t.data.data.items,e.total=t.data.data.totalNum):e.$util.failCallback(t.data,e)}).catch(function(t){e.loading=!1})},statusChange:function(t){this.queryParams.searchType=t.code,this.chargeShow?this.getList(this.queryParams):this.getList2(this.queryParams)},goDetail:function(t){var e=this.$util.encrypt(t.caseCode+"_"+t.caseId.toString()+"_"+t.caseManageId.toString(),"caseDetail"),a=(window.location.origin?window.location.origin:"")+"/#/worker_case_detail?id="+e;window.open(a)},tbOperate:function(t,e){var a=this;if("编辑"==e.name)this.dialogVisible=!0,this.dialogForm=t;else{if("已对账"==e.name)return!1;this.$axios.post("/api/assignee/gtasks/disposeGtasks",{caseId:t.caseId,gtasksType:t.gtasksType,id:t.id,operatorType:e.typekey}).then(function(t){0==t.data.code?(a.$message.success(e.name+"成功"),a.getList(a.queryParams)):a.$util.failCallback(t.data,a)}).catch(function(t){})}},handleCurrentChange:function(t){this.queryParams.currentPage=t,this.getList(this.queryParams)},goClerkRole:function(){this.tabList=[{index:0,name:"申请对账",type:0}],this.comTb=this.tb2,this.getList2(this.queryParams)},close:function(){this.dialogVisible=!1},submitCheckAmount:function(t){var e=this;this.$refs.dialogForm.validate(function(a){if(!a)return!1;e.$axios.post("/api/assignee/gtasks/disposeGtasksCheckBill",{checkAmount:t.checkAmount,id:t.id}).then(function(t){0==t.data.code?(e.close(),e.$message({type:"success",examine:"提交成功"}),e.getList2(e.queryParams)):e.$util.failCallback(t.data,e)}).catch(function(t){})})}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticStyle:{height:"100%"}},[a("el-col",{staticClass:"examine-aside",attrs:{span:3}},[a("p",{staticClass:"aside-title"},[t._v("待办-我的审批")]),t._v(" "),a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"0"}},t._l(t.statusList,function(e){return a("el-menu-item",{key:e.id,attrs:{index:e.code},on:{click:function(a){t.statusChange(e)}}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v(t._s(e.name)+"\n          "),e.count?a("span",[t._v(t._s("("+e.count+")"))]):t._e()])])}))],1),t._v(" "),a("el-col",{attrs:{span:21}},[a("div",{staticClass:"content-body"},[a("div",{staticClass:"bd-top"},[a("div",{staticClass:"md clearfix"},[a("div",{staticClass:"md-left"},[a("h5",[t._v("待办-我的审批")])]),t._v(" "),a("div",{staticClass:"md-right"})])]),t._v(" "),a("div",{staticClass:"bd-main"},[a("my-tabs",{attrs:{tabList:t.tabList,tabIndex:t.tabIndex},on:{changeTab:t.changeTab}},[a("keep-alive",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",attrs:{height:"460",data:t.comTb.data,"tooltip-effect":"dark","show-overflow-tooltip":"","empty-text":"暂无数据"}},[a("el-table-column",{attrs:{type:"index",width:"40"}}),t._v(" "),a("el-table-column",{attrs:{label:"标题内容"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                  "+t._s(e.row.applyContent)+"，案件编号\n                  "),a("a",{staticClass:"el-button--text el-button--small",staticStyle:{"text-decoration":"underline"},attrs:{href:"javascript:void(0)"},on:{click:function(a){t.goDetail(e.row)}}},[t._v("\n                    "+t._s(e.row.caseCode)+"\n                  ")])]}}])}),t._v(" "),t._l(t.comTb.fields,function(t){return a("el-table-column",{key:t.id,attrs:{align:t.align||"left",prop:t.key,label:t.label,width:t.width}})}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(t.comTb.OperationBtn,function(i){return e.row[i.param]==i.key?a("el-button",{key:i.id,attrs:{type:i.type,size:i.size},on:{click:function(a){t.tbOperate(e.row,i)}}},[t._v("\n                    "+t._s(i.name)+"\n                    ")]):t._e()}),t._v(" "),"编辑"!=t.comTb.OperationBtn[0].name?a("span",[t._v(t._s(0!=e.row.approveStatus?e.row.approveStatusName:"")+" ")]):t._e()]}}])})],2)],1)],1),t._v(" "),a("pagination",{attrs:{total:t.total,pageSize:t.queryParams.pageSize,currentPage:t.queryParams.currentPage},on:{changePage:t.handleCurrentChange,changeSize:t.changeSize}}),t._v(" "),a("el-dialog",{attrs:{title:"核对欠款金额","close-on-click-modal":!1,"show-close":!0,visible:t.dialogVisible,center:!0},on:{"update:visible":function(e){t.dialogVisible=e},close:t.close}},[a("el-form",{ref:"dialogForm",attrs:{rules:t.rules,"label-width":"100px",model:t.dialogForm,inline:!0,size:"mini"}},[a("el-form-item",{attrs:{label:"案件编号",prop:"caseCode"}},[a("el-input",{attrs:{disabled:"",clearable:""},model:{value:t.dialogForm.caseCode,callback:function(e){t.$set(t.dialogForm,"caseCode",e)},expression:"dialogForm.caseCode"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"姓名",prop:"borrowerName"}},[a("el-input",{attrs:{disabled:"",clearable:""},model:{value:t.dialogForm.borrowerName,callback:function(e){t.$set(t.dialogForm,"borrowerName",e)},expression:"dialogForm.borrowerName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"身份证号",prop:"borrowerIdnumber"}},[a("el-input",{attrs:{disabled:"",clearable:""},model:{value:t.dialogForm.borrowerIdnumber,callback:function(e){t.$set(t.dialogForm,"borrowerIdnumber",e)},expression:"dialogForm.borrowerIdnumber"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"最新欠款金额",prop:"latestDebtMoney"}},[a("el-input",{attrs:{disabled:"",clearable:""},model:{value:t.dialogForm.latestDebtMoney,callback:function(e){t.$set(t.dialogForm,"latestDebtMoney",e)},expression:"dialogForm.latestDebtMoney"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"声明欠款金额",prop:"statementAmount"}},[a("el-input",{attrs:{disabled:"",clearable:""},model:{value:t.dialogForm.statementAmount,callback:function(e){t.$set(t.dialogForm,"statementAmount",e)},expression:"dialogForm.statementAmount"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"对账欠款金额",prop:"checkAmount"}},[a("el-input",{attrs:{clearable:""},model:{value:t.dialogForm.checkAmount,callback:function(e){t.$set(t.dialogForm,"checkAmount",e)},expression:"dialogForm.checkAmount"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitCheckAmount(t.dialogForm)}}},[t._v("提 交")])],1)],1)],1)])])],1)},staticRenderFns:[]};var u=a("vSla")(c,d,!1,function(t){a("2VHm")},"data-v-7cfbc63d",null);e.default=u.exports}});