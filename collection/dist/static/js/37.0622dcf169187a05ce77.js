webpackJsonp([37],{"1y+q":function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});e("XBA1");var n=e("5YEj"),i=e.n(n),s=[{key:"staffName",label:"催收员",width:"200",id:"2"},{key:"orgName",label:"所属部门",width:"",id:"3"},{key:"repayMoney",label:"回收金额",width:"150",id:"4",align:"right"},{key:"commitMoney",label:"委托金额",width:"150",id:"5",align:"right"},{key:"onCaseRecovery",label:"在案回收率",width:"150",id:"6",align:"right"},{key:"newCaseRecovery",label:"新案回收率",width:"150",id:"7",align:"right"},{key:"oldCaseRecovery",label:"旧案回收率",width:"150",id:"9",align:"right"},{key:"repayCaseCount",label:"还款案件数",width:"150",id:"10",align:"right"},{key:"commitCaseCount",label:"分配案件数",width:"150",id:"11",align:"right"}],o={components:{MyTabs:e("MS1A").a},data:function(){return{currentChart:"/api/assignee/performance/staffOne/getRepayMoneyData",tb:{data:[],fields:s},departments:[],departmentIds:[],departmentId:"",departmentProps:{label:"name",value:"id"},tabsData:[{code:"/api/assignee/performance/staffOne/getRepayMoneyData",name:"回收金额"},{code:"/api/assignee/performance/staffOne/getCommitMoneyData",name:"委托金额"},{code:"/api/assignee/performance/staffOne/getOnRecovery",name:"在案回收率"},{code:"/api/assignee/performance/staffOne/getNewRecovery",name:"新案回收率"},{code:"/api/assignee/performance/staffOne/getOldRecovery",name:"旧案回收率"},{code:"/api/assignee/performance/staffOne/getRepayCountData",name:"还款案件数"},{code:"/api/assignee/performance/staffOne/getCommitCountData",name:"分配案件数"}],conditionForm:{currentPage:1,orgId:null,pageSize:15},xAxisData:[],seriesData:[],personKPIChart:null,dropdownData:{},loading:!0,staffId:"",staffName:"",staffs:[],staffObj:{},total:0}},created:function(){this.getDepartmentData()},mounted:function(){this.personKPIChart=i.a.init(this.$refs.personKPIChart)},methods:{changePage:function(a){this.conditionForm.currentPage=a,this.getList()},staffIdChange:function(a){this.staffId=a.id,this.staffName=a.name,this.getchartData(this.currentChart)},chartChange:function(a){this.currentChart=a.code,this.getchartData(a.code)},drawChart:function(){this.personKPIChart.clear();var a={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},title:{left:"center",text:""},legend:{data:[this.staffName]},toolbox:{},xAxis:{type:"category",data:this.xAxisData,axisTick:{alignWithLabel:!0}},yAxis:{type:"value"},dataZoom:[{startValue:24,endValue:35,handleIcon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",handleSize:"80%",handleStyle:{color:"#fff",shadowBlur:3,shadowColor:"rgba(0, 0, 0, 0.6)",shadowOffsetX:2,shadowOffsetY:2}}],series:[{name:this.staffName,type:"bar",barWidth:"30%",data:this.seriesData}]};this.personKPIChart.setOption(a)},getchartData:function(a){var t=this;this.$axios.post(a,{staffId:this.staffId}).then(function(a){0==a.data.code?(t.xAxisData=[],t.seriesData=[],t.chartData=a.data.data,t.chartData.forEach(function(a){this.xAxisData.push(a.date),this.seriesData.push(a.value)},t),t.drawChart()):t.$util.failCallback(a.data,t)}).catch(function(a){})},getdropdownData:function(){var a=this;this.$axios.post("",{}).then(function(t){0==t.data.code?a.dropdownData=t.data.data:a.$util.failCallback(t.data,a)}).catch(function(a){})},getDepartmentData:function(){var a=this;this.$axios.post("/api/assignee/performance/staff/getDepartmentData",{}).then(function(t){0==t.data.code?(a.departments=t.data.data,a.conditionForm.orgId=t.data.data[0].id,a.getList()):a.$util.failCallback(t.data,a)}).catch(function(a){})},getStaffData:function(a){var t=this;this.departmentId=this.departmentIds[this.departmentIds.length-1],this.$axios.post("/api/assignee/performance/staff/getStaffData",{departmentId:this.departmentId}).then(function(a){0==a.data.code?(t.staffObj={},t.staffId=t.tb.data[0].staffId,t.staffName=t.tb.data[0].staffName,t.getchartData(t.tabsData[0].code),t.staffs=a.data.data):t.$util.failCallback(a.data,t)}).catch(function(a){})},getList:function(){var a=this;this.loading=!0,this.$axios.post("/api/assignee/performance/staff/getPerformanceData",this.conditionForm).then(function(t){a.loading=!1,0==t.data.code?(a.total=t.data.data.totalNum,a.staffId=t.data.data.items[0].staffId,a.staffName=t.data.data.items[0].staffName,a.getchartData(a.tabsData[0].code),a.tb.data=t.data.data.items):a.$util.failCallback(t.data,a)}).catch(function(t){a.loading=!1})},changeSize:function(a){this.conditionForm.pageSize=a,this.getList()},downloadTable:function(){var a=this;this.$axios({method:"post",url:"/api/assignee/performance/staff/getPerformanceDataDownload",data:{currentPage:1,orgId:this.conditionForm.orgId,pageSize:this.total},responseType:"blob"}).then(function(t){if("application/json"!=t.data.type){var e=t.data,n=new Blob([e]),i=decodeURI(t.headers["content-disposition"].split("=")[1]);if("download"in document.createElement("a")){var s=document.createElement("a");s.download=i,s.style.display="none",s.href=URL.createObjectURL(n),document.body.appendChild(s),s.click(),URL.revokeObjectURL(s.href),document.body.removeChild(s)}else navigator.msSaveBlob(n,i)}else a.$message({type:"error",message:"导出失败"})}).catch(function(a){})}}},r={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"content-body"},[a._m(0),a._v(" "),e("div",{staticClass:"bd-main"},[e("el-form",{attrs:{size:"mini",inline:""}},[e("el-form-item",{attrs:{label:"部门",prop:"departmentId"}},[e("el-cascader",{attrs:{options:a.departments,"change-on-select":"",props:a.departmentProps},on:{change:a.getStaffData},model:{value:a.departmentIds,callback:function(t){a.departmentIds=t},expression:"departmentIds"}})],1),a._v(" "),e("el-form-item",{attrs:{label:"催收员",prop:"staffId"}},[e("el-select",{attrs:{placeholder:"请选择",filterable:"","value-key":"id"},on:{change:a.staffIdChange},model:{value:a.staffObj,callback:function(t){a.staffObj=t},expression:"staffObj"}},a._l(a.staffs,function(a){return e("el-option",{key:a.id,attrs:{label:a.name,value:a}})}))],1)],1),a._v(" "),e("my-tabs",{attrs:{tabList:a.tabsData,tabIndex:a.currentChart},on:{changeTab:a.chartChange}},[e("div",{ref:"personKPIChart",staticStyle:{height:"380px"}})]),a._v(" "),e("p",{staticClass:"exportTable"},[e("a",{staticClass:"el-icon-upload2",on:{click:a.downloadTable}},[a._v("导出EXCEL文件")])]),a._v(" "),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.loading,expression:"loading"}],ref:"multipleTable",attrs:{data:a.tb.data,height:"460","tooltip-effect":"dark","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","empty-text":"暂无数据","show-overflow-tooltip":""}},[e("el-table-column",{attrs:{type:"index",width:"120",label:"本月绩效排名",align:"center"}}),a._v(" "),a._l(a.tb.fields,function(a){return e("el-table-column",{key:a.id,attrs:{align:a.align||"left",prop:a.key,label:a.label,width:a.width}})})],2),a._v(" "),e("el-pagination",{attrs:{small:"",layout:"sizes,total, prev, pager, next, jumper",total:a.total,"page-sizes":[15,50,100],"page-size":a.conditionForm.pageSize,"current-page":a.conditionForm.currentPage},on:{"update:currentPage":function(t){a.$set(a.conditionForm,"currentPage",t)},"current-change":a.changePage,"size-change":a.changeSize}})],1)])},staticRenderFns:[function(){var a=this.$createElement,t=this._self._c||a;return t("div",{staticClass:"bd-top"},[t("div",{staticClass:"md clearfix"},[t("div",{staticClass:"md-left"},[t("h5",[this._v("个人绩效查看")])]),this._v(" "),t("div",{staticClass:"md-right"})])])}]};var d=e("vSla")(o,r,!1,function(a){e("F3M2")},null,null);t.default=d.exports},F3M2:function(a,t){}});