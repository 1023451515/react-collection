webpackJsonp([6],{"5KFM":function(t,e){},CUZu:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("HzJ8"),o=i.n(a),s=i("aA9S"),n=i.n(s),r=i("XBA1"),l={name:"addSensitive",props:{addVisible:{type:Boolean}},data:function(){return{conditionForm:[""],save:!1}},methods:{close:function(){this.conditionForm=[""],this.$emit("addClose")},submit:function(){var t=this;if(0===this.conditionForm.length)return this.$alert("请填入关键字！","提示",{confirmButtonText:"确定",type:"warning"}),!1;var e=!0,i=!1,a=void 0;try{for(var s,n=o()(this.conditionForm);!(e=(s=n.next()).done);e=!0){if(0==s.value.length)return this.$alert("请填入关键字！","提示",{confirmButtonText:"确定",type:"warning"}),!1}}catch(t){i=!0,a=t}finally{try{!e&&n.return&&n.return()}finally{if(i)throw a}}this.$axios.post("/api/assignee/alarmWord/add",{alarmWords:this.conditionForm}).then(function(e){0==e.data.code?(t.$message({type:"success",message:"保存成功"}),t.save=!0,t.conditionForm=[""],t.$emit("addClose",t.save)):t.$util.failCallback(e.data,t),t.loading=!1}).catch(function(e){t.loading=!1})},reset:function(){this.close()},deleteWords:function(t){this.conditionForm.splice(t,1)},addWords:function(){this.conditionForm.push("")}}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{title:"新增敏感词","close-on-click-modal":!1,width:"30%","show-close":!0,visible:t.addVisible,center:!0},on:{"update:visible":function(e){t.addVisible=e},close:t.close}},[i("el-form",{ref:"conditionForm",staticClass:"condition-form dialog-main",attrs:{"label-position":"right",size:"mini"}},[t._l(t.conditionForm,function(e,a){return i("el-form-item",{key:a,attrs:{label:"",prop:"alarmWords"}},[i("el-input",{attrs:{maxlength:20,placeholder:"请输入敏感词",clearable:""},model:{value:t.conditionForm[a],callback:function(e){t.$set(t.conditionForm,a,e)},expression:"conditionForm[index]"}}),t._v(" "),i("i",{staticClass:"el-icon-delete",on:{click:function(e){t.deleteWords(a)}}})],1)}),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},nativeOn:{click:function(e){return e.preventDefault(),t.addWords(e)}}},[t._v("新增敏感词")])],1)],2),t._v(" "),i("div",{staticClass:"dialog_submit"},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.submit}},[t._v("提交")]),t._v(" "),i("el-button",{attrs:{size:"small"},on:{click:t.reset}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]};var d=i("vSla")(l,c,!1,function(t){i("VwSr")},"data-v-4470f17c",null).exports,m=(i("6iV/"),{name:"importWords",data:function(){return{result:"",filename:"",fileList:[],postData:{},save:!1}},props:{batchVisible:{type:Boolean,default:!1}},methods:{close:function(){this.clearFiles(),this.$emit("batchClose")},reset:function(){this.close()},submitUpload:function(){0==this.$refs.importCase.fileList.length?this.$message.warning("请选择文件"):this.$refs.importCase.submit()},beforeUpload:function(t){var e=t.name.lastIndexOf("."),i=t.name.substring(e+1),a="xls"==i||"xlsx"==i,o=t.size/1024/1024<2;return a?o||this.$message.error("上传文件大小不能超过 2MB!"):this.$message.error("只能上传 excel 文件!"),a&&o||(this.file="",this.fileList=[],this.filename=""),a&&o},handleExceed:function(){this.$message.warning("当前限制选择 1 个文件")},handleSuccess_importCase:function(t){0==t.code?(this.$message({type:"success",message:t.msg}),this.save=!0,this.clearFiles(),this.$emit("batchClose",this.save)):this.result=t.msg+"!"},handleError:function(t,e,i){},handleChange:function(t){var e=this.beforeUpload(t);"ready"==t.status&&e&&(this.filename=t.name,this.fileList[0]=t)},clearFiles:function(){this.filename="",this.result="",this.$refs.importCase.clearFiles()}}}),h={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{title:"批量导入敏感词","close-on-click-modal":!1,width:"40%","show-close":!0,visible:t.batchVisible,center:!0},on:{"update:visible":function(e){t.batchVisible=e},close:t.close}},[i("div",{staticClass:"upload_content"},[i("label",{staticClass:"el-form-item__label",staticStyle:{width:"200px"}},[t._v("敏感词文件上传")]),t._v(" "),i("el-upload",{ref:"importCase",staticClass:"upload-demo",attrs:{multiple:!1,"on-exceed":t.handleExceed,action:"/api/assignee/alarmWord/inport",data:t.postData,"on-success":t.handleSuccess_importCase,"on-error":t.handleError,"on-change":t.handleChange,"file-list":t.fileList,"auto-upload":!1,limit:1,accept:"",name:"filename"}},[i("el-input",{attrs:{slot:"trigger",placeholder:"请选择文件",readonly:!0,size:"small"},slot:"trigger",model:{value:t.filename,callback:function(e){t.filename=e},expression:"filename"}}),t._v(" "),i("i",{staticClass:"el-icon-error",on:{click:t.clearFiles}})],1),t._v(" "),i("div",{staticStyle:{"padding-left":"230px"}},[i("el-button",{attrs:{type:"text"}},[i("a",{attrs:{href:"/api/assignee/alarmWord/templetExport"}},[t._v("模板下载")])])],1),t._v(" "),i("span",{staticClass:"result-upload error-result"},[t._v(t._s(t.result))])],1),t._v(" "),i("div",{staticClass:"dialog-footer"},[i("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(e){return e.preventDefault(),t.submitUpload(e)}}},[t._v("上传")]),t._v(" "),i("el-button",{attrs:{size:"small"},on:{click:t.reset}},[t._v("取消")])],1)])],1)},staticRenderFns:[]};var u=i("vSla")(m,h,!1,function(t){i("Y966")},"data-v-b87ad628",null).exports,f=[{key:"id",label:"ID",width:"auto"},{key:"alarmWord",label:"敏感词",width:"auto"},{key:"createTime",label:"创建时间",width:"auto"}],p={data:function(){return{conditionForm:{createTimeMin:"",createTimeMax:"",alarmWord:"",pageSize:15,currentPage:1},searchForm:{},hasSearch:!1,tb:{data:[],fields:f},loading:!1,createTime:[],rules:{},total:0,addVisible:!1,batchVisible:!1,selected:[]}},components:{pagination:r.a,addSensitive:d,importWords:u},methods:{addWords:function(){this.addVisible=!0},deleteWords:function(){var t=this;this.selected.length?this.$axios.post("/api/assignee/alarmWord/delete",{alarmWords:this.selected}).then(function(e){0==e.data.code?(t.getList(),t.$message.success("删除成功")):t.$util.failCallback(e.data,t)}).catch(function(t){}):this.$alert("未选择敏感词！","提示",{confirmButtonText:"确定",type:"warning"})},exportWords:function(){var t=this;0==this.selected.length&&this.tb.data.forEach(function(e){t.selected.push(e.alarmWord)}),this.$axios({method:"post",url:"/api/assignee/alarmWord/export",data:{alarmWords:this.selected},responseType:"blob"}).then(function(e){if("application/json"!=e.data.type){var i=decodeURI(e.headers["content-disposition"].split("=")[1]),a=e.data,o=new Blob([a]);if("download"in document.createElement("a")){var s=document.createElement("a");s.download=i,s.style.display="none",s.href=URL.createObjectURL(o),document.body.appendChild(s),s.click(),URL.revokeObjectURL(s.href),document.body.removeChild(s)}else navigator.msSaveBlob(o,i)}else t.$message({type:"error",message:"导出失败"})}).catch(function(t){})},importWords:function(){this.batchVisible=!0},createTimeChange:function(t){t?(this.conditionForm.createTimeMin=t[0],this.conditionForm.createTimeMax=t[1]):(this.conditionForm.createTimeMin="",this.conditionForm.createTimeMax="")},reset:function(){this.$refs.conditionForm.resetFields(),this.conditionForm.createTimeMin="",this.conditionForm.createTimeMax="",this.createTime=[],this.searchForm=n()({},this.conditionForm),1==this.conditionForm.currentPage?this.getList(this.conditionForm):(this.conditionForm.currentPage=1,this.hasSearch=!0)},search:function(){var t=this;this.$refs.conditionForm.validate(function(e){e&&(t.searchForm=n()({},t.conditionForm),1==t.conditionForm.currentPage?t.getList(t.conditionForm):(t.conditionForm.currentPage=1,t.hasSearch=!0))})},getList:function(t){var e,i=this;e=t||this.conditionForm,this.loading=!0,this.$axios.post("/api/assignee/alarmWord/search",e).then(function(t){i.loading=!1,0==t.data.code?(i.tb.data=t.data.data.items,i.total=t.data.data.totalNum):i.$util.failCallback(t.data,i),i.loading=!1}).catch(function(t){i.loading=!1})},changeSize:function(t){this.conditionForm.pageSize=t,this.searchForm.pageSize=t,1==this.conditionForm.currentPage?this.getList(this.conditionForm):(this.conditionForm.currentPage=1,this.getList(this.conditionForm))},changePage:function(t){this.searchForm.currentPage=t,this.hasSearch?(this.getList(this.conditionForm),this.hasSearch=!1):(this.conditionForm=n()({},this.searchForm),this.getList(this.searchForm))},addClose:function(t){this.addVisible=!1,t&&this.getList()},batchClose:function(t){this.batchVisible=!1,t&&this.getList()},handleSelectionChange:function(t){this.selected=[];var e=!0,i=!1,a=void 0;try{for(var s,n=o()(t);!(e=(s=n.next()).done);e=!0){var r=s.value;this.selected.push(r.alarmWord)}}catch(t){i=!0,a=t}finally{try{!e&&n.return&&n.return()}finally{if(i)throw a}}}},created:function(){this.searchForm=n()({},this.conditionForm),this.getList(this.conditionForm)}},v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content-body"},[i("div",{staticClass:"bd-top"},[i("div",{staticClass:"md clearfix"},[t._m(0),t._v(" "),i("div",{staticClass:"md-right"},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.addWords}},[t._v("新增敏感词")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.importWords}},[t._v("批量导入")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.deleteWords}},[t._v("删除")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.exportWords}},[t._v("导出")])],1)])]),t._v(" "),i("div",{staticClass:"bd-main"},[i("el-form",{ref:"conditionForm",staticClass:"condition-form",attrs:{model:t.conditionForm,"label-width":"60px","label-position":"right",size:"mini"}},[i("div",{staticClass:"el-col fixed-width"},[i("el-form-item",{attrs:{label:"创建时间",prop:""}},[i("el-date-picker",{attrs:{clearable:"",type:"daterange",format:"yyyy/MM/dd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd"},on:{change:t.createTimeChange},model:{value:t.createTime,callback:function(e){t.createTime=e},expression:"createTime"}})],1)],1),t._v(" "),i("div",{staticClass:"el-col fixed-width"},[i("el-form-item",{attrs:{label:"敏感词",prop:"alarmWord"}},[i("el-input",{attrs:{maxlength:20,clearable:""},model:{value:t.conditionForm.alarmWord,callback:function(e){t.$set(t.conditionForm,"alarmWord",e)},expression:"conditionForm.alarmWord"}})],1)],1),t._v(" "),i("div",{staticClass:"el-col  form-btns"},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.search}},[t._v("搜索")]),t._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:t.reset}},[t._v("重置")])],1)]),t._v(" "),i("div",{staticClass:"table"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",attrs:{height:"700","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading",data:t.tb.data,"tooltip-effect":"dark","empty-text":"暂无数据"},on:{"selection-change":t.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"100",fixed:"left"}}),t._v(" "),t._l(t.tb.fields,function(t){return i("el-table-column",{key:t.id,attrs:{align:t.align||"left",prop:t.key,label:t.label,width:t.width}})})],2)],1)],1),t._v(" "),i("pagination",{attrs:{total:t.total,pageSize:t.conditionForm.pageSize,"current-page":t.conditionForm.currentPage},on:{changePage:t.changePage,changeSize:t.changeSize}}),t._v(" "),i("addSensitive",{attrs:{addVisible:t.addVisible},on:{addClose:t.addClose}}),t._v(" "),i("importWords",{attrs:{batchVisible:t.batchVisible},on:{batchClose:t.batchClose}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"md-left"},[e("h5",[this._v("敏感词设置")])])}]};var g=i("vSla")(p,v,!1,function(t){i("5KFM")},"data-v-3a25a971",null);e.default=g.exports},VwSr:function(t,e){},Y966:function(t,e){}});