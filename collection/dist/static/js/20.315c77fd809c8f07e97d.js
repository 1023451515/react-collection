webpackJsonp([20],{"dA/Y":function(t,o,e){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var i=e("aA9S"),n=e.n(i),a=[{key:"batchCode",label:"批次号",width:"auto",type:"0"},{key:"batchName",label:"批次名称",width:"110",type:"0"},{key:"consignerCount",label:"委案数量",width:"100",type:"2"},{key:"closeCount",label:"已结案件",width:"80",type:"2"},{key:"notCloseCount",label:"未结案件",width:"80",type:"2"},{key:"notFollowCount",label:"本月未跟进",width:"100",type:"2",caseListType:"2"},{key:"followCount",label:"本月跟进",width:"80",type:"2",caseListType:"3"},{key:"consignerMoney",label:"委案金额",width:"120",type:"0",align:"right"},{key:"consignerDate",label:"委案时间",width:"100",type:"0"},{key:"limitDate",label:"退案时间",width:"100",type:"0"},{key:"allotStatusName",label:"分配状态",width:"auto",type:"0"}],r={components:{myTable:e("4OB+").a},computed:{},created:function(){this.$route.path.slice(1);this.searchForm=n()({},this.conditionForm),this.getList(this.conditionForm),this.getdropdownData()},data:function(){var t=this;return{selected:[],operationBtns:[{name:"查看",identifier:"sponsor_position_search",isShow:!0},{name:"批次案件分发",identifier:"sponsor_position_create",dialog:{dialogFormVisible:!1,form:{orgId:"",batchCodes:[],companyOrgSigns:[]},rule:{},url:"/api/sponsor/batchManage/allocationBatch",formName:"createForm",title:"批次案件分发"},isShow:!0}],dateObjs:{commitDate:"",limitDate:""},pickerOptions2:{onPick:function(t,o){}},conditionForm:{batchCode:"",batchName:"",batchAllotStatus:"",consignerOrgName:"",consignerDateMin:"",consignerDateMax:"",consignerMoneyMin:"",limitDateMin:"",limitDateMax:"",consignerMoneyMax:"",currentPage:1,consignerCountMin:"",consignerCountMax:"",pageSize:15,commitDate:[],limitDate:[]},tb:{data:[],fields:a},loading:!0,currentPage:1,pageSize:15,total:0,batchData:[],link:"",dropdownData:{batchAllotStatus:[],consignerOrgs:[]},AllAssigneeOrg:[],rules:{batchCode:[this.$util.formRule.batchCode],batchName:[this.$util.formRule.batchName],borrowName:[this.$util.formRule.userName],consignerMoneyMin:[{validator:function(o,e,i){e?/^[1-9][0-9]{0,9}([.][0-9]{0,2})?$/.test(e)?t.conditionForm.consignerMoneyMax&&t.conditionForm.consignerMoneyMax-0<t.conditionForm.consignerMoneyMin-0?i(new Error("最小值不能大于最大值")):(t.$refs.consignerMoneyMax.clearValidate(),i()):i(new Error("最多10位整数和2位小数")):i()},trigger:"blur",type:"number"}],consignerMoneyMax:[{validator:function(o,e,i){e?/^[1-9][0-9]{0,9}([.][0-9]{0,2})?$/.test(e)?t.conditionForm.consignerMoneyMin&&t.conditionForm.consignerMoneyMax-0<t.conditionForm.consignerMoneyMin-0?i(new Error("最小值不能大于最大值")):(t.$refs.consignerMoneyMin.clearValidate(),i()):i(new Error("最多10位整数和2位小数")):i()},trigger:"blur",type:"number"}],consignerCountMin:[{validator:function(o,e,i){e?/^[1-9][0-9]{0,5}$/.test(e)?t.conditionForm.consignerCountMax&&t.conditionForm.consignerCountMax-0<t.conditionForm.consignerCountMin-0?i(new Error("最小值不能大于最大值")):(t.$refs.consignerCountMax.clearValidate(),i()):i(new Error("最多6位整数")):i()},trigger:"blur",type:"number"}],consignerCountMax:[{validator:function(o,e,i){e?/^[1-9][0-9]{0,5}$/.test(e)?t.conditionForm.consignerCountMin&&t.conditionForm.consignerCountMax-0<t.conditionForm.consignerCountMin-0?i(new Error("最小值不能大于最大值")):(t.$refs.consignerCountMin.clearValidate(),i()):i(new Error("最多6位整数")):i()},trigger:"blur",type:"number"}]}}},methods:{search:function(){var t=this;this.$refs.conditionForm.validate(function(o){o&&(t.searchForm=n()({},t.conditionForm),1==t.conditionForm.currentPage?t.getList(t.conditionForm):(t.conditionForm.currentPage=1,t.getList(t.conditionForm),t.hasSearch=!0))})},reset:function(){this.$refs.conditionForm.resetFields(),this.conditionForm.consignerDateMin="",this.conditionForm.consignerDateMax="",this.conditionForm.limitDateMin="",this.conditionForm.limitDateMax="",this.searchForm=n()({},this.conditionForm),1==this.conditionForm.currentPage?this.getList(this.conditionForm):(this.conditionForm.currentPage=1,this.getList(this.conditionForm),this.hasSearch=!0)},handleCurrentChange:function(t){this.searchForm.currentPage=t,this.hasSearch?(this.getList(this.conditionForm),this.hasSearch=!1):(this.conditionForm=n()({},this.searchForm),this.getList(this.searchForm))},goDetail:function(t,o){var e,i=t.row.batchCode,n=t.row.batchName,a=this.$util.encrypt(i,"batch"),r=n?this.$util.encrypt(n,"batch"):"";switch(t.column.label){case"委案数量":e=1;break;case"已结案件":e=2;break;case"未结案件":e=3;break;case"本月未跟进":e=4;break;case"本月跟进":e=5}var s=(window.location.origin?window.location.origin:"")+"/#/assignee_batch_detail?type="+e+"&batchCode="+a+"&batchName="+r;window.open(s)},openDialog:function(t){this.selected.length>=1?this.selected.every(function(t){return 0==t.batchAllotStatus})?(t.dialog.form.batchCodes=[],t.dialog.form.companyOrgSigns=[],this.selected.forEach(function(o){t.dialog.form.batchCodes.push(o.batchCode),t.dialog.form.companyOrgSigns.push(o.consignerCompanySign)}),this.getAllAssigneeOrg(),void 0!==this.$refs[t.dialog.formName]&&this.$refs[t.dialog.formName].resetFields(),t.dialog.dialogFormVisible=!0):this.$alert("请选择全部待分配的记录进行操作！","提示",{confirmButtonText:"确定"}):this.$alert("请选择一条记录进行操作！","提示",{confirmButtonText:"确定"})},getAllAssigneeOrg:function(){var t=this;this.$axios.post("/api/sponsor/caseManage/getAllAssigneeOrg").then(function(o){0==o.data.code?t.AllAssigneeOrg=o.data.data:t.$util.failCallback(o.data,t)}).catch(function(t){})},getdropdownData:function(t){var o=this;this.$axios.post("/api/assignee/caseManage/getBatchManageSearchInfo",{}).then(function(e){0==e.data.code?(o.dropdownData.batchAllotStatus=e.data.data.batchAllotStatus,o.dropdownData.batchAllotStatus.unshift({name:"All",code:""}),t&&t(o)):o.$util.failCallback(e.data,o)}).catch(function(t){})},consignerDateChange:function(t){if(null==t)return this.conditionForm.consignerDateMin="",void(this.conditionForm.consignerDateMax="");this.conditionForm.consignerDateMin=t[0],this.conditionForm.consignerDateMax=t[1]},limitDateChange:function(t){if(null==t)return this.conditionForm.limitDateMin="",void(this.conditionForm.limitDateMax="");this.conditionForm.limitDateMin=t[0],this.conditionForm.limitDateMax=t[1]},getList:function(t){var o,e=this;o=t||this.conditionForm,this.loading=!0,this.$axios.post("/api/assignee/caseManage/getBatchCaseInfo",o).then(function(t){0==t.data.code?(e.tb.data=t.data.data.items,e.total=t.data.data.totalNum):e.$util.failCallback(t.data,e),e.loading=!1}).catch(function(t){e.loading=!1})},changeSize:function(t){this.conditionForm.pageSize=t,this.searchForm.pageSize=t,1==this.conditionForm.currentPage?this.getList(this.conditionForm):(this.conditionForm.currentPage=1,this.getList(this.conditionForm))},dialogCloseHandle:function(t){t.dialog.dialogFormVisible=!1},dialogSubmitHandle:function(t){var o=this;this.$refs[t.dialog.formName].validate(function(e){e&&o.$axios.post(t.dialog.url,o.$util.encodePostBody(t.dialog.form)).then(function(e){0==e.data.code?(t.dialog.dialogFormVisible=!1,o.getList(o.basicParams),o.$message({type:"success",message:e.data.msg})):o.$util.failCallback(e.data,o)}).catch(function(t){})})},handleSelectionChange:function(t){this.selected=t},sortChange:function(t){}}},s={render:function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("div",{staticClass:"content-body"},[t._m(0),t._v(" "),e("div",{staticClass:"bd-main"},[e("el-form",{ref:"conditionForm",staticClass:"condition-form",attrs:{model:t.conditionForm,"label-width":this.$util.LABEL_WIDTH,"label-position":"right",size:"mini"}},[e("div",{staticClass:"el-col fixed-width"},[e("el-form-item",{attrs:{label:"批次号",prop:"batchCode"}},[e("el-input",{attrs:{placeholder:"请输入批次号",clearable:""},model:{value:t.conditionForm.batchCode,callback:function(o){t.$set(t.conditionForm,"batchCode",o)},expression:"conditionForm.batchCode"}})],1)],1),t._v(" "),e("div",{staticClass:"el-col fixed-width"},[e("el-form-item",{attrs:{label:"批次名称",prop:"batchName"}},[e("el-input",{attrs:{placeholder:"请输入批次名",clearable:""},model:{value:t.conditionForm.batchName,callback:function(o){t.$set(t.conditionForm,"batchName",o)},expression:"conditionForm.batchName"}})],1)],1),t._v(" "),e("div",{staticClass:"el-col fixed-width"},[e("el-form-item",{attrs:{label:"委案金额"}},[e("el-col",{attrs:{span:11}},[e("el-form-item",{ref:"consignerMoneyMin",attrs:{label:"",prop:"consignerMoneyMin"}},[e("el-input",{staticClass:"amount",attrs:{placeholder:"请输入数量开头",clearable:""},model:{value:t.conditionForm.consignerMoneyMin,callback:function(o){t.$set(t.conditionForm,"consignerMoneyMin",o)},expression:"conditionForm.consignerMoneyMin"}})],1)],1),t._v(" "),e("el-col",{staticClass:"line",attrs:{span:2}},[t._v("-")]),t._v(" "),e("el-col",{attrs:{span:11}},[e("el-form-item",{ref:"consignerMoneyMax",attrs:{label:"",prop:"consignerMoneyMax"}},[e("el-input",{staticClass:"amount",attrs:{placeholder:"请输入数量结尾",clearable:""},model:{value:t.conditionForm.consignerMoneyMax,callback:function(o){t.$set(t.conditionForm,"consignerMoneyMax",o)},expression:"conditionForm.consignerMoneyMax"}})],1)],1)],1)],1),t._v(" "),e("div",{staticClass:"el-col fixed-width"},[e("el-form-item",{attrs:{label:"委案数量"}},[e("el-col",{attrs:{span:11}},[e("el-form-item",{ref:"consignerCountMin",attrs:{label:"",prop:"consignerCountMin"}},[e("el-input",{staticClass:"amount",attrs:{placeholder:"请输入数量开头",clearable:""},model:{value:t.conditionForm.consignerCountMin,callback:function(o){t.$set(t.conditionForm,"consignerCountMin",o)},expression:"conditionForm.consignerCountMin"}})],1)],1),t._v(" "),e("el-col",{staticClass:"line",attrs:{span:2}},[t._v("-")]),t._v(" "),e("el-col",{attrs:{span:11}},[e("el-form-item",{ref:"consignerCountMax",attrs:{label:"",prop:"consignerCountMax"}},[e("el-input",{staticClass:"amount",attrs:{placeholder:"请输入数量结尾",clearable:""},model:{value:t.conditionForm.consignerCountMax,callback:function(o){t.$set(t.conditionForm,"consignerCountMax",o)},expression:"conditionForm.consignerCountMax"}})],1)],1)],1)],1),t._v(" "),e("div",{staticClass:"el-col fixed-width"},[e("el-form-item",{attrs:{label:"委案时间",prop:"commitDate"}},[e("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:""},on:{change:t.consignerDateChange},model:{value:t.conditionForm.commitDate,callback:function(o){t.$set(t.conditionForm,"commitDate",o)},expression:"conditionForm.commitDate"}})],1)],1),t._v(" "),e("div",{staticClass:"el-col fixed-width"},[e("el-form-item",{attrs:{label:"退案时间",prop:"limitDate"}},[e("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:""},on:{change:t.limitDateChange},model:{value:t.conditionForm.limitDate,callback:function(o){t.$set(t.conditionForm,"limitDate",o)},expression:"conditionForm.limitDate"}})],1)],1),t._v(" "),e("div",{staticClass:"el-col fixed-width"},[e("el-form-item",{attrs:{label:"批次分配状态",prop:"batchAllotStatus"}},[e("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:t.conditionForm.batchAllotStatus,callback:function(o){t.$set(t.conditionForm,"batchAllotStatus",o)},expression:"conditionForm.batchAllotStatus"}},t._l(t.dropdownData.batchAllotStatus,function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.code}})}))],1)],1),t._v(" "),e("div",{staticClass:"el-col fixed-width form-btns"},[e("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.search}},[t._v("搜索")]),t._v(" "),e("el-button",{attrs:{size:"mini"},on:{click:t.reset}},[t._v("重置")])],1)]),t._v(" "),e("my-table",{attrs:{tb:t.tb,loading:t.loading},on:{choose:t.handleSelectionChange,sortChange:t.sortChange,goDetail:t.goDetail}}),t._v(" "),e("el-pagination",{attrs:{small:"",total:t.total,"current-page":t.conditionForm.currentPage,"page-size":t.conditionForm.pageSize,layout:"sizes,total, prev, pager, next,jumper","page-sizes":[15,50,100]},on:{"update:currentPage":function(o){t.$set(t.conditionForm,"currentPage",o)},"current-change":t.handleCurrentChange,"size-change":t.changeSize}})],1)]),t._v(" "),e("el-dialog",{attrs:{title:t.operationBtns[1].dialog.title,visible:t.operationBtns[1].dialog.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(o){t.$set(t.operationBtns[1].dialog,"dialogFormVisible",o)}}},[e("el-form",{ref:t.operationBtns[1].dialog.formName,attrs:{model:t.operationBtns[1].dialog.form,"label-width":"180px",rules:t.operationBtns[1].dialog.rule}},[e("el-form-item",{attrs:{label:"催收部门",prop:"orgId"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.operationBtns[1].dialog.form.orgId,callback:function(o){t.$set(t.operationBtns[1].dialog.form,"orgId",o)},expression:"operationBtns[1].dialog.form.orgId"}},t._l(t.AllAssigneeOrg,function(t){return e("el-option",{key:t.id,attrs:{label:t.orgName,value:t.id}})}))],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{size:"mini"},nativeOn:{click:function(o){o.preventDefault(),t.dialogCloseHandle(t.operationBtns[1])}}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{size:"mini",type:"primary"},nativeOn:{click:function(o){o.preventDefault(),t.dialogSubmitHandle(t.operationBtns[1])}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,o=this._self._c||t;return o("div",{staticClass:"bd-top"},[o("div",{staticClass:"md clearfix"},[o("div",{staticClass:"md-left"},[o("h5",[this._v("批次管理")])]),this._v(" "),o("div",{staticClass:"md-right"})])])}]};var l=e("vSla")(r,s,!1,function(t){e("fwis")},null,null);o.default=l.exports},fwis:function(t,o){}});