webpackJsonp([27],{Hnsf:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i("aA9S"),a=i.n(o),n=i("6iV/"),l=i.n(n),s=[{key:"id",label:"职位编号",width:""},{key:"positionName",label:"职位名称",width:""},{key:"positionType",label:"职位类型",width:""},{key:"description",label:"描述",width:""}],r={data:function(){return{holderList:[{label:"平台方",value:"assignee"},{label:"委案方",value:"ASSIGNEE"},{label:"催收方",value:"ASSIGNEE"}],isShow:!1,total:0,pageSize:15,loading:!0,operationBtns:[{name:"查看",identifier:"assignee_position_search",isShow:!1},{name:"创建",identifier:"assignee_position_create",dialog:{dialogFormVisible:!1,form:{positionName:"",positionType:"",roleId:null,description:""},rule:{positionName:[{required:!0,message:"职位名称不能为空",trigger:"blur"}],positionType:[{required:!0,message:"职位类型不能为空",trigger:"change"}],description:[{required:!0,message:"描述不能为空",trigger:"blur"}],roleId:[{required:!0,message:"角色不能为空",trigger:"change"}]},formName:"createForm",url:"/api/assignee/position/createPosition",title:"职位创建"},isShow:!1},{name:"修改",identifier:"assignee_position_update",dialog:{dialogFormVisible:!1,form:{positionName:"",positionType:"",roleId:null,description:"",id:null},rule:{positionName:[{required:!0,message:"职位名称不能为空",trigger:"change"}],positionType:[{required:!0,message:"职位类型不能为空",trigger:"change"}],description:[{required:!0,message:"描述不能为空",trigger:"change"}],roleId:[{required:!0,message:"角色不能为空",trigger:"change"}]},formName:"editForm",url:"/api/assignee/position/updatePosition",title:"职位修改"},isShow:!0},{name:"删除",identifier:"assignee_position_delete",form:{id:""},url:"/api/assignee/position/deletePosition",isShow:!1}],tb:{fields:s,data:[]},multipleSelection:[],selected:[],currentPage:1,roleList:[],positionTypeList:[],tempRow:[]}},computed:{queryParams:function(){return{currentPage:this.currentPage,pageSize:15,holder:"ASSIGNEE"}}},created:function(){var e={identifier:this.$route.path.slice(1)};this.$util.getPageResourceByMenu(e,this),this.getPositionTypeList(),this.getRoleList(),this.getList(this.queryParams)},methods:{holderChangeHandle:function(e){this.getList(this.queryParams),this.getRoleList()},getList:function(e){var t=this;this.loading=!0,this.$axios.get("/api/assignee/position/getList",{params:e}).then(function(e){0==e.data.code?(t.tb.data=e.data.data.items,t.total=e.data.data.totalNum):t.$util.failCallback(e.data,t),t.loading=!1}).catch(function(e){t.loading=!1})},resetHandle:function(){},searchHandle:function(){},handleSizeChange:function(){},changeSize:function(e){this.queryParams.pageSize=e,this.currentPage=1,this.getList(this.queryParams),this.getRoleList()},handleCurrentChange:function(){},handleSelectionChange:function(e){this.selected=e},dialogSubmitHandle:function(e){var t=this;this.$refs[e.dialog.formName].validate(function(i){if(i){var o={holder:t.queryParams.holder};e.dialog.form=a()(o,e.dialog.form),t.$axios.post(e.dialog.url,l.a.stringify(t.$util.encodePostBody(e.dialog.form))).then(function(i){0==i.data.code?(e.dialog.dialogFormVisible=!1,t.getList(t.queryParams),t.$message({type:"success",message:i.data.msg})):t.$util.failCallback(i.data,t)}).catch(function(e){})}})},dialogCloseHandle:function(e){e.dialog.dialogFormVisible=!1},openEditDialog:function(e,t){this.tempRow=a()({},e.row),t.dialog.dialogFormVisible=!0,t.dialog.form=this.tempRow},openCreateDialog:function(e){void 0!==this.$refs[e.dialog.formName]&&this.$refs[e.dialog.formName].resetFields(),e.dialog.dialogFormVisible=!0},closeCreateDialog:function(e){},deleteHandle:function(e){var t=this;1==this.selected.length?this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.form.id=t.selected[0].id,t.$axios.post(e.url,l.a.stringify(t.$util.encodePostBody(e.form))).then(function(e){0==e.data.code?(t.getList(t.queryParams),t.$message({type:"success",message:e.data.msg})):t.$util.failCallback(e.data,t)},function(e){})}).catch(function(){}):this.$alert("请选择一条记录进行操作！","提示",{confirmButtonText:"确定"})},getPositionTypeList:function(){var e=this;this.$axios.get("/api/assignee/position/getPositionType",{params:{dictTypeCode:"position_type"}}).then(function(t){0==t.data.code?e.positionTypeList=t.data.data:e.$util.failCallback(t.data,e)}).catch(function(e){})},getRoleList:function(){var e=this;this.$axios.get("/api/assignee/position/getRoleList",{params:{holder:this.queryParams.holder}}).then(function(t){0==t.data.code?e.roleList=t.data.data:e.$util.failCallback(t.data,e)}).catch(function(e){})}}},d={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"content-body"},[i("div",{staticClass:"bd-top"},[i("div",{staticClass:"md clearfix"},[e._m(0),e._v(" "),i("div",{staticClass:"md-right"},[e.operationBtns[1].isShow?i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.openCreateDialog(e.operationBtns[1])}}},[e._v(e._s(e.operationBtns[1].name))]):e._e(),e._v(" "),e.operationBtns[3].isShow?i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){e.deleteHandle(e.operationBtns[3])}}},[e._v(e._s(e.operationBtns[3].name))]):e._e()],1)])]),e._v(" "),i("div",{staticClass:"bd-main"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",attrs:{height:"750px","tooltip-effect":"dark","element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading",data:e.tb.data},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",fixed:"left"}}),e._v(" "),e._l(e.tb.fields,function(e){return i("el-table-column",{key:e.id,attrs:{align:"left",prop:e.key,label:e.label,width:e.width}})}),e._v(" "),e.operationBtns[2].isShow?i("el-table-column",{attrs:{width:"80",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",icon:"el-icon-edit",disabled:t.row.isDefault},nativeOn:{click:function(i){i.preventDefault(),e.openEditDialog(t,e.operationBtns[2])}}})]}}])}):e._e()],2),e._v(" "),i("el-pagination",{attrs:{small:"",layout:"sizes, total, prev, pager, next, jumper",total:e.total,"page-sizes":[15,50,100],"page-size":e.pageSize,"current-page":e.currentPage},on:{"update:currentPage":function(t){e.currentPage=t},"current-change":e.holderChangeHandle,"size-change":e.changeSize}})],1)]),e._v(" "),i("el-dialog",{attrs:{title:e.operationBtns[1].dialog.title,visible:e.operationBtns[1].dialog.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.$set(e.operationBtns[1].dialog,"dialogFormVisible",t)}}},[i("el-form",{ref:e.operationBtns[1].dialog.formName,staticClass:"dialog-main",attrs:{model:e.operationBtns[1].dialog.form,"label-width":"90px",rules:e.operationBtns[1].dialog.rule,size:"small"}},[i("el-form-item",{attrs:{label:"职位名称",prop:"positionName"}},[i("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入职位名称"},model:{value:e.operationBtns[1].dialog.form.positionName,callback:function(t){e.$set(e.operationBtns[1].dialog.form,"positionName",t)},expression:"operationBtns[1].dialog.form.positionName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"职位描述",prop:"description"}},[i("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入职位描述"},model:{value:e.operationBtns[1].dialog.form.description,callback:function(t){e.$set(e.operationBtns[1].dialog.form,"description",t)},expression:"operationBtns[1].dialog.form.description"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"角色",prop:"roleId"}},[i("el-select",{attrs:{placeholder:"请选择角色"},model:{value:e.operationBtns[1].dialog.form.roleId,callback:function(t){e.$set(e.operationBtns[1].dialog.form,"roleId",t)},expression:"operationBtns[1].dialog.form.roleId"}},e._l(e.roleList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"职位类型",prop:"positionType"}},[i("el-radio-group",{model:{value:e.operationBtns[1].dialog.form.positionType,callback:function(t){e.$set(e.operationBtns[1].dialog.form,"positionType",t)},expression:"operationBtns[1].dialog.form.positionType"}},e._l(e.positionTypeList,function(t){return i("el-radio",{key:t.id,attrs:{label:t.dictItemCode}},[e._v(e._s(t.dictItemName))])}))],1)],1),e._v(" "),i("div",{staticClass:"dialog_submit"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogCloseHandle(e.operationBtns[1])}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.dialogSubmitHandle(e.operationBtns[1])}}},[e._v("提交")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:e.operationBtns[2].dialog.title,visible:e.operationBtns[2].dialog.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.$set(e.operationBtns[2].dialog,"dialogFormVisible",t)}}},[i("el-form",{ref:e.operationBtns[2].dialog.formName,staticClass:"dialog-main",attrs:{model:e.operationBtns[2].dialog.form,"label-width":"90px",size:"small",rules:e.operationBtns[2].dialog.rule}},[i("el-form-item",{attrs:{label:"职位编号",prop:"id"}},[i("el-input",{attrs:{"auto-complete":"off",disabled:"",placeholder:"请输入职位名称"},model:{value:e.operationBtns[2].dialog.form.id,callback:function(t){e.$set(e.operationBtns[2].dialog.form,"id",t)},expression:"operationBtns[2].dialog.form.id"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"职位名称",prop:"positionName"}},[i("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入职位描述"},model:{value:e.operationBtns[2].dialog.form.positionName,callback:function(t){e.$set(e.operationBtns[2].dialog.form,"positionName",t)},expression:"operationBtns[2].dialog.form.positionName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"职位描述",prop:"description"}},[i("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入职位描述"},model:{value:e.operationBtns[2].dialog.form.description,callback:function(t){e.$set(e.operationBtns[2].dialog.form,"description",t)},expression:"operationBtns[2].dialog.form.description"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"角色",prop:"roleId"}},[i("el-select",{attrs:{placeholder:"请选择角色"},model:{value:e.operationBtns[2].dialog.form.roleId,callback:function(t){e.$set(e.operationBtns[2].dialog.form,"roleId",t)},expression:"operationBtns[2].dialog.form.roleId"}},e._l(e.roleList,function(e){return i("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"职位类型",prop:"positionType"}},[i("el-radio-group",{model:{value:e.operationBtns[2].dialog.form.positionType,callback:function(t){e.$set(e.operationBtns[2].dialog.form,"positionType",t)},expression:"operationBtns[2].dialog.form.positionType"}},e._l(e.positionTypeList,function(t){return i("el-radio",{key:t.id,attrs:{label:t.dictItemCode}},[e._v(e._s(t.dictItemName))])}))],1)],1),e._v(" "),i("div",{staticClass:"dialog_submit"},[i("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogCloseHandle(e.operationBtns[2])}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.dialogSubmitHandle(e.operationBtns[2])}}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"md-left"},[t("h5",[this._v("职位管理")])])}]};var p=i("vSla")(r,d,!1,function(e){i("gr7J")},"data-v-9ced6e5a",null);t.default=p.exports},gr7J:function(e,t){}});