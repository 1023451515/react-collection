<template>
  <div :class="paddingBtm">
    <div class="content-body">
      <!-- 顶部，包括标题，操作按钮-->
      <div class="bd-top">
        <div class="md clearfix">
          <!-- 1、左边标题 -->
          <div class="md-left">
            <h5>案件详情</h5>
          </div>
          <!-- 2、右边操作按钮 -->
          <div class="md-right">
            <el-select v-model="caseCode" placeholder="请选择" size="mini" class="selection" @change="changePerson">
              <el-option :label="item.name" :value="item.caseCode" v-for="item in dropdownData" :key="item.caseCode"></el-option>
            </el-select>
          </div>
        </div>
      </div>
      <div class="bd-main">
        <div class="case-detail">
          <el-row>
            <!-- 借款人头像 -->
            <img src="../../../assets/people.jpg" alt="" width="80px" height="80px" class="borrower-avatar">
            <!-- <el-row class="caseNum">{{caseCode}} | 案件编号</el-row>
            <el-row class="batchNum">{{caseInfoBeans.batchCode }} | 案件批次</el-row> -->
            <!-- 借款人标签 -->
            <div class="borrower-tags">
            
               <template v-if="labels.self">
                <el-badge value="本人" class="item" v-for="btn in labels.self" round :key="btn.id">
                <el-button size="mini" type="primary">{{btn}}</el-button>
              </el-badge>
              </template>
              <template  v-if="labels.direct">
                    <el-badge value="直系" class="item" v-for="btn in labels.direct" round :key="btn.id">
                <el-button size="mini"  type="primary">{{btn}}</el-button>
              </el-badge>
              </template>
              <template  v-if="labels.others">
                   <el-badge value="其它" class="item" v-for="btn in labels.others" round :key="btn.id">
                <el-button size="mini"  type="primary">{{btn}}</el-button>
              </el-badge>
              </template> 
            </div>
          </el-row>
        </div>
        <information :debtInfoBeans="debtInfoBeans" :caseInfoBeans="caseInfoBeans" :userInfoBeans="userInfoBeans" :moreInfo="moreInfo"
          @toMoreInfo="toMoreInfo" @callPhone="callPhone"  @smsSend="smsSend" @qqSend="qqSend" @wechatSend="wechatSend" @chooseConcat="chooseConcat" :disabledBtn="disabledBtn"></information>
      </div>
    </div>
    <div class="content-body">
      <!-- 顶部，包括标题，操作按钮-->
      <div class="bd-top" style="border:none">
        <div class="md clearfix">
          <!-- 1、左边标题 -->
          <div class="">
            <h5>更多操作</h5>
            <!-- Tabs -->
            <my-tabs :tabList="tabList" :tabIndex="tabIndex" @changeTab="changeTab" style="margin-bottom:0">
              <keep-alive>
                <!-- <component :is="currentContent"> </component>  -->
              </keep-alive>
            </my-tabs>
          </div>
          <!-- 2、右边操作按钮 -->
          <div class="md-right">
          </div>
        </div>
      </div>
      <div class="bd-main">
        <!-- 催收记录 -->
        <collectionRecord v-if="componentIndex==0" :caseCode="caseCode" :caseManageId="caseManageId" :caseId="caseId"  ref="collectRecord"></collectionRecord>
        <!-- 失联修复 -->
        <repaireConnection v-if="componentIndex==1" :caseCode="caseCode" :caseManageId="caseManageId" :caseId="caseId" @smsSend="smsSend2" @repiareCall="repiareCall"></repaireConnection>
        <!-- 外访 -->
        <outVisit v-if="componentIndex==2" :caseCode="caseCode" :caseManageId="caseManageId" :caseId="caseId"></outVisit>
        <!-- 申请减免 -->
        <applyDerate v-if="componentIndex==3" :applyderateTb="applyderateTb" :caseId="caseId"></applyDerate>
        <!-- 司法催收 -->
        <justice v-if="componentIndex==4" :justiceTb="justiceTb" :juscticeParam="params" @getjusticeList='getjusticeList'></justice>
        <!-- 公安协催 -->
        <police v-if="componentIndex==5" :policeTb="policeTb" :policeParam="params" @getpoliceList='getpoliceList'></police>
        <!-- 对账 -->
        <accountChecking v-if="componentIndex==6" :accountCheckingTb="accountCheckingTb" :accountCheckingParam="params" @getaccountCheckingList='getaccountCheckingList'></accountChecking>
        <!-- <el-table ref="multipleTable" :data="tb.data" tooltip-effect="dark" v-loading="loading" element-loading-text="拼命加载中" element-loading-spinner="el-icon-loading"
         empty-text="暂无数据">
          <el-table-column v-for="field in tb.fields" align="left" :prop="field.key" :label="field.label" :width="field.width" :key="field.id">
          </el-table-column>
        </el-table>
        <pagination :total="total" @changePage="changePage" :pageSize="pageSize" :currentPage="currentPage" :moreInfo="moreInfo"></pagination> -->
      </div>
      <!-- 添加微信 -->
      <add-weChat :wechatAddVisible="wechatAddVisible" v-if="wechatAddVisible" :onLineData="onLineData" :wechatCode="this.userInfoBeans.wechatCode"
        :mywechatAccount="this.mywechatAccount" @addwechatclose="addwechatclose"></add-weChat>
      <send-weChat :wechatSendVisible="wechatSendVisible" v-if="wechatSendVisible" :onLineData="onLineData" :wechatCode="this.userInfoBeans.wechatCode"
        :mywechatAccount="this.mywechatAccount" @sendwechatclose="sendwechatclose"></send-weChat>
      <!-- QQ-->
      <qqAdd :qqAddVisible="qqAddVisible" :onLineData="onLineData" :qqCode="this.userInfoBeans.qqCode" :myQQAccount="this.myQQAccount"
        @addQQclose="addQQclose" v-if="qqAddVisible"></qqAdd>
      <qqSend :qqSendVisible="qqSendVisible" :onLineData="onLineData" :qqCode="this.userInfoBeans.qqCode" :myQQAccount="this.myQQAccount"
        @sendQQclose="sendQQclose" v-if="qqSendVisible"></qqSend>
      <!-- 短信 -->
      <sms v-if="smsVisible" :smsVisible="smsVisible" :onLineData="onLineData" :phoneInfo="phoneInfo" @smsClose="smsClose"></sms>
      <!-- 失联修复短信 -->
      <sms2 v-if="smsVisible2" ref="sms2" :smsVisible="smsVisible2" :onLineData="onLineData" :phoneInfo="phoneInfo2" @smsClose="smsClose2"></sms2>


    </div>

    <div class="fixed-area">
      <h6 :class="bg">
        <el-button :class="arrowBtn" size='mini' @click.prevent.native="closeFix"></el-button>
      </h6>
      <div :class="fixShow">
        <div class="infoLeft">
          <el-form inline class="condition-form" label-width="66px" label-position="right" :model="callData" ref="phoneStatus">
            <el-form-item label="联系人：">
              <span>{{ callData.callName }}</span>
            </el-form-item>
            <el-form-item label="电话：" style="width:180px">
              <span>{{ callData.callPhone }}</span>
            </el-form-item>
            <el-form-item label="有效性：" prop="phoneStatus" :rules="[{required:true,message:'有效性为必选项',trigger:'change'}]">
              <el-radio-group v-model="callData.phoneStatus" size="mini">
                <el-radio-button label="有效"></el-radio-button>
                <el-radio-button label="无效"></el-radio-button>
              </el-radio-group>
            </el-form-item>
            <el-form-item label="呼叫电话：" prop='callPhone' :rules="[{pattern: /^1[0-9]{10}$/, message: '手机格式错误',  trigger: 'blur'}]">
              <el-input v-model="callData.callPhone" :maxlength="11"  placeholder="请输入拨打号码" size="mini"  @change="inputPhone">
              </el-input>
            </el-form-item>
            <el-form-item>
              <el-button size="mini" class="el-icon-phone-outline mg-10" @click="onCall" :disabled="disabledBtn" ref="phone" type="primary"> {{phoneBtnText}}</el-button>
              <el-button size="mini" class="el-icon-phone" style="color:#f00" @click="cancelCall" :disabled="cancelBtn"> 挂断</el-button>
            </el-form-item>
          </el-form>
          <el-form inline class="condition-form" label-position="right" :model="callData" ref="phoneLabel">
            <el-form-item label="电话标注：" style="width:100%" prop="phoneLabel" :rules="[{required:true,message:'电话标注必选项',trigger:'change'}]">
              <el-radio-group v-model="callData.phoneLabel" size="mini">
                <el-radio-button label="正常接听"></el-radio-button>
                <el-radio-button label="正在通话"></el-radio-button>
                <el-radio-button label="无人接听"></el-radio-button>
                <el-radio-button label="拒绝接听"></el-radio-button>
                <el-radio-button label="挂断"></el-radio-button>
                <el-radio-button label="关机"></el-radio-button>
                <el-radio-button label="不在服务区"></el-radio-button>
                <el-radio-button label="停机空号"></el-radio-button>
                <el-radio-button label="其它"></el-radio-button>
              </el-radio-group>
            </el-form-item>
          </el-form>
          <el-form inline class=" condition-form" label-position="right" :model="callData" ref="repaymentIntention">
            <el-form-item label="还款意愿：" style="width:100%" prop="repaymentIntention" :rules="[{required:true,message:'还款意愿为必选项',trigger:'change'}]">
              <el-checkbox-group v-model="callData.repaymentIntention" size="mini" @change="intentionChange">
                <el-checkbox-button label="承诺还款"></el-checkbox-button>
                <el-checkbox-button label="有还款意愿"></el-checkbox-button>
                <el-checkbox-button label="未借钱"></el-checkbox-button>
                <el-checkbox-button label="已还款"></el-checkbox-button>
                <el-checkbox-button label="没有钱"></el-checkbox-button>
                <el-checkbox-button label="稍后沟通"></el-checkbox-button>
                <el-checkbox-button label="可待偿"></el-checkbox-button>
                <el-checkbox-button label="不认识"></el-checkbox-button>
                <el-checkbox-button label="打错了"></el-checkbox-button>
              </el-checkbox-group>
            </el-form-item>
          </el-form>
          <el-form inline class="condition-form" label-position="right" label-width="66px" :model="callData" ref="contactAttitude">
            <el-form-item label="态度：" style="width:100%" prop="contactAttitude" :rules="[{required:true,message:'态度为必选项',trigger:'change'}]">
              <el-checkbox-group v-model="callData.contactAttitude" size="mini">
                <el-checkbox-button label="态度好" key="态度好">态度好</el-checkbox-button>
                <el-checkbox-button label="态度差" key="态度差">态度差</el-checkbox-button>
                <el-checkbox-button label="爱骂人" key="爱骂人">爱骂人</el-checkbox-button>
              </el-checkbox-group>
            </el-form-item>
          </el-form>
          <el-form inline class="condition-form" label-position="right" :model="callData" ref="caseDevelopment">
            <el-form-item label="案件进展：" style="width:100%" prop="caseDevelopment" :rules="[{required:true,message:'案件进展为必选项',trigger:'change'}]">
              <el-checkbox-group v-model="callData.caseDevelopment" size="mini">
                <el-checkbox-button label="承诺还款"></el-checkbox-button>
                <el-checkbox-button label="金额有争议"></el-checkbox-button>
                <el-checkbox-button label="部分还款"></el-checkbox-button>
                <el-checkbox-button label="承诺还清"></el-checkbox-button>
                <el-checkbox-button label="本人愿意还款"></el-checkbox-button>
                <el-checkbox-button label="本人无意还款"></el-checkbox-button>
                <el-checkbox-button label="无力偿还"></el-checkbox-button>
                <el-checkbox-button label="亲人愿意代还"></el-checkbox-button>
                <el-checkbox-button label="亲人无意代还"></el-checkbox-button>
                <el-checkbox-button label="声明不欠款"></el-checkbox-button>
                <el-checkbox-button label="声明已还款"></el-checkbox-button>
              </el-checkbox-group>
            </el-form-item>
          </el-form>
        </div>
        <div class="infoRight">
          <el-form inline class="condition-form" label-position="right" ref="collectionRemark" :model="callData">
            <el-form-item style="width:100%" prop="collectionRemark" :rules="[{required:true,message: '催记详情为必填项', trigger:'change,blur'},{min:5,max:300,message:'字数在5和300之间',trigger:'blur,change'}]">
              <el-input type="textarea" placeholder="添加更多催记详情" v-model="callData.collectionRemark" :rows="10" :maxlength="200"></el-input>
            </el-form-item>
          </el-form>
        </div>
        <div>
          <div class="promiseInfo" v-if="promiseInfoShow">
            <el-form inline class="condition-form" label-position="right" label-width="120" :model="callData" :rules="rules" ref="promise">
              <el-form-item label="还款承诺：" style="width: auto">
              </el-form-item>
              <el-form-item label="承诺还款时间：" prop="promiseRepaymentTime" ref="promiseRepaymentTime">
                <el-date-picker v-model="callData.promiseRepaymentTime" value-format="yyyy-MM-dd HH:mm:ss" @change="getTime" format="yyyy-MM-dd HH:mm"
                  type="datetime" size="mini" clearable>
                </el-date-picker>
              </el-form-item>
              <el-form-item label="承诺还款余额：" prop="promiseAmount" ref="promiseAmount">
                <el-input size="mini" v-model="callData.promiseAmount" type="number" clearable></el-input>
              </el-form-item>
              <el-form-item label="申请减免金额：" prop="reliefAmount" ref="reliefAmount">
                <el-input size='mini' v-model="callData.reliefAmount" type="number" clearable></el-input>
              </el-form-item>
            </el-form>
          </div>
          <div class="addArea">
            <el-form inline class="condition-form concatInfo" label-position="right" label-width="120" :model="addPersonInfo" ref="addPersonInfo"
              v-for=" (addPersonInfo,index) in callData.addContact" :key="index">
              <el-form-item label="关系：" prop="contactRelation" :rules="[{required:true,message: '请选择',trigger: 'blur,change'}]">
                <el-radio-group size="mini" v-model="addPersonInfo.contactRelation" prop="contactRelation" :rules="[{required: true,message: '关系为必选',trigger:'change'}]">
                  <el-radio-button label="本人"></el-radio-button>
                  <el-radio-button label="直系亲属"></el-radio-button>
                  <el-radio-button label="其他"></el-radio-button>
                </el-radio-group>
              </el-form-item>
              <el-form-item label="姓名：" prop="contactName" :rules="[{ pattern: /^[\u4e00-\u9fa5a-zA-Z]{2,10}$/,message: '1至10位汉字或字母', trigger: 'blur,change'}]">
                <el-input size="mini" v-model="addPersonInfo.contactName" placeholder="请输入" clearable></el-input>
              </el-form-item>
              <el-form-item label="手机号：" prop="contactTel" :rules="[{required:true,message:'必填项',trigger:'blur,change'},{pattern: /^(13|14|15|18|17)[0-9]{9}$/, message: '手机格式错误', trigger: 'blur,change'}]">
                <el-input size="mini" v-model="addPersonInfo.contactTel" placeholder="请输入" clearable></el-input>
              </el-form-item>
              <el-form-item label="微信：" prop="contactWechatCode">
                <el-input size="mini" v-model="addPersonInfo.contactWechatCode" placeholder="请输入" :maxlength="40" clearable></el-input>
              </el-form-item>
              <el-form-item label="QQ：" prop="contactQqCode" :rules="[{pattern:/^[1-9][0-9]{4,14}$/,message: 'QQ格式错误',trigger:'blur,change'}]">
                <el-input size="mini" v-model="addPersonInfo.contactQqCode" placeholder="请输入" clearable></el-input>
              </el-form-item>
              <el-form-item label="邮箱：" prop="email" :rules="[{pattern: /^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/,message: '邮箱格式错误',trigger:'blur'}]">
                <el-input size="mini" v-model="addPersonInfo.email" placeholder="请输入" :maxlength="40" clearable></el-input>
              </el-form-item>
              <el-form-item label="身份证：" prop="contactIdnumber" :rules="[{pattern: /(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/, message: '身份证格式错误', trigger: 'blur,change'}]">
                <el-input size="mini" v-model="addPersonInfo.contactIdnumber" placeholder="请输入" clearable></el-input>
              </el-form-item>
              <el-form-item label="常用地址：">
                <el-input size="mini" v-model="addPersonInfo.usualAddress" placeholder="请输入" :maxlength="40" clearable></el-input>
              </el-form-item>
              <el-form-item label="公司：">
                <el-input size="mini" v-model="addPersonInfo.companyName" placeholder="请输入" :maxlength="40" clearable></el-input>
              </el-form-item>
              <el-form-item label="公司地址：">
                <el-input size="mini" v-model="addPersonInfo.companyAddress" placeholder="请输入" :maxlength="40" clearable></el-input>
              </el-form-item>
              <el-form-item>
                <a href="javascript:void(0);" class="el-icon-delete mg-10" @click="deleteConcat(index)" ></a>
              </el-form-item>
            </el-form>
          </div>
          <el-form inline class="form-detail condition-form addBtn" label-position="right">
            <el-form-item label="添加联系人：" style="width:40%">
              <el-button size="mini" class="el-icon-plus" type="success" @click.prevent.native="addConcatInfo">添加联系人</el-button>
              <span> &nbsp;&nbsp;&nbsp;添加后系统会帮您找到更多信息</span>
            </el-form-item>
            <el-form-item class="btnGroup">
              <el-button type="primary" size="mini" @click.prevent.native="addComplain">投诉预警</el-button>
              <el-button type="primary" size="mini" @click.prevent.native="addnote">添加备忘</el-button>
              <el-button type="primary" size="mini" @click.prevent.native="submit(false)">保存</el-button>
              <el-button type="primary" size="mini" v-if="personLength>1" :disabled="isLast"  @click.prevent.native="next">下一个</el-button>
            </el-form-item>
          </el-form>
        </div>
      </div>
    </div>
    <complain v-if="complainVisible" :complainVisible="complainVisible" :onLineData="onLineData" @complainClose="complainClose" ></complain>
    <!-- 备忘http: //192.168.10.211/userweb_pro/webapi.php?module=index&action=index&username=8008&password=8008-->
    <note :noteVisible="noteVisible" @noteClose="noteClose"></note>
  <!-- <iframe :src="callSrc" id="iframeID" name="a" style="width:100%;height:200px" v-show="false"></iframe> -->
  </div>
</template>



<script>
  import tableComponent from "../../public-components/table";
  import pagination from "../../public-components/pagination";
  import information from "../detail-components/information";
  // 实时联系
  import addWeChat from '../realtime-link/wechat/addweChat.vue'
  import sendWeChat from '../realtime-link/wechat/sendweChat.vue'
  // 添加qq
  import qqAdd from '../realtime-link/QQ/addQQ'
  // 发送qq 
  import qqSend from '../realtime-link/QQ/sendQQ'
  // 短信
  import sms from '../realtime-link/sms/sms.vue'
  // 失联修复短信
  import sms2 from '../realtime-link/sms/sms2.vue'
  // 更多操作
  // import MyTabs from './my-tabs'
  import MyTabs from '../../public-components/my-tabs.vue'
  
  // 催收记录
  import collectionRecord from './collection-record/collection_record'
  // 失联修复 
  import repaireConnection from './repaire-connection/repaire_connection'
  // 申请减免
  import applyDerate from './apply-derate/apply_derate'
  // 外访
  import outVisit from './out-visit/out_visit'
  // 司法催收
  import justice from './justice/justice'
  // 公安协催
  import police from './police/police'
  //  对账
  import accountChecking from './account-checking/account_checking'
  // 投诉
  import complain from './complain/add_complain'
  // 备忘
  import note from './note/add_note'
  import {
    mapGetters,
    mapActions
  } from 'vuex'

  export default {
    components: {
      // 微信
      addWeChat,
      sendWeChat,
      // 短信
      sms,
      // 失联修复短信
      sms2,
      tableComponent,
      pagination,
      information,
      MyTabs,
      applyDerate,
      outVisit,
      justice,
      police,
      accountChecking,
      complain,
      // 备忘
      note,
      qqAdd,
      qqSend,
      collectionRecord,
      repaireConnection,
    },
    data() {
      var reliefAmountValidate = (rule, value, callback) => {
          if (value) {
            let pattern = /^[1-9][0-9]{0,9}([.][0-9]{0,2})?$/;
            if (!pattern.test(value)) {
              callback(new Error("最多10位整数和2位小数"));
            } else if (!(this.callData.reliefAmount && this.callData.promiseRepaymentTime)) {
              callback(new Error("承诺还款金额和时间需填"));
            } else {
              callback();
            }
          } else {
            callback();
          }
        },
        promiseAmountValidate = (rule, value, callback) => {
          if (value) {
            let pattern = /^[1-9][0-9]{0,9}([.][0-9]{0,2})?$/;
            if (!pattern.test(value)) {
              callback(new Error("最多10位整数和2位小数"));
            } else if (!this.callData.promiseRepaymentTime) {
              callback(new Error("承诺还款时间需填"));
              //  console.log(this.callData.promiseRepaymentTime)
            } else {
              callback();
            }
          } else {
            callback();
          }
        };
      return {
        // 微信
        addweChatShow: true,
        // 切换tabs
        tabIndex: -1,
        componentIndex: -1,
        // currentContent: 'applyDerate',
        fixShow: "hide",
        personLength: 1,
        tabList: [{
            index: 0,
            name: "催收记录",
            method: ""
          },
          {
            index: 1,
            name: "失联修复",
            method: ""
          },
          {
            index: 2,
            name: "外访",
            method: ''
            // component: ''
          },
          {
            index: 3,
            name: "申请减免",
            method: this.getapplyderateList
          },
          {
            index: 4,
            name: "申请司法催收",
            method: this.getjusticeList
          },
          {
            index: 5,
            name: "申请公安协催",
            method: this.getpoliceList
          },
          {
            index: 6,
            name: "申请对账",
            method: this.getaccountCheckingList
          }
        ],
        tbData: [],
        caseInfoBeans: {},
        debtInfoBeans: {},
        userInfoBeans: {},
        phoneCode: "",
        moreInfo: "更多信息 >>",
        caseCodeArr: [],
        caseObjArr: [],
        dropdownData: [],
        promiseInfoShow: false,
        callData: {
          callName: "",
          callPhone: "",
          caseId: "",
          caseCode: '',
          caseManageId: "",
          contactRelation: "本人",
          phoneStatus: "",
          phoneLabel: "",
          repaymentIntention: [],
          contactAttitude: [],
          caseDevelopment: [],
          promiseRepaymentTime: null,
          promiseAmount: null,
          reliefAmount: null,
          addContact: [],
          collectionRemark: "",
          phoneAnswerStatus: 1,
          strongId: '',
          source: '',
          isRelevancy: 0
        },
        addContact: {
          companyAddress: "",
          companyName: "",
          contactIdnumber: "",
          contactName: "",
          contactRelation: "本人",
          usualAddress: "",
          contactQqCode: "",
          contactWechatCode: "",
          email: "",
          caseCode: ""
        },
        // 司法催收
        justiceTb: [],
        // 公安
        policeTb: [],
        // 对账
        accountCheckingTb: [],
        params: {},
        caseInfoBeans: {},
        debtInfoBeans: {},
        userInfoBeans: {},
        labels: {},
        phoneCode: "",
        moreInfo: "更多信息 >>",
        caseCode: "",
        caseId: "",
        caseManageId: "",
        collectionMarkId: "",
        caseStatus: "",
        total: 0,
        pageSize: 15,
        currentPage: 1,
        fixPhone: "",
        fixName: '',
        arrowBtn: "el-icon-d-arrow-left fixedBtn",
        bg: "bgHide",
        paddingBtm: "content-hide",
        rules: {
          promiseAmount: [{
            validator: promiseAmountValidate,
            trigger: "blur,change",
            type: "number"
          }],
          reliefAmount: [{
            validator: reliefAmountValidate,
            trigger: "blur,change",
            type: "number"
          }]
        },
        complainVisible: false,
        // 备忘
        noteVisible: false,
        assignData: {},
        applyderateTb: [],
        // 微信
        isWechatfriend: false,
        wechatAddVisible: false,
        qqSendVisible: false,
        mywechatAccount: '',
        wechatSendVisible: false,
        qqAddVisible: false,
        qqSendVisible: false,
        isQQfriend: false,
        myQQAccount: '',
        onLineData: {}
        // 短信
        ,
        smsVisible: false,
        phoneInfo: null,
        // 失联修复短信
        smsVisible2: false,
        phoneInfo2: null,
        disabledBtn: false,
        cancelBtn: true,
        caseIndex: 0,
        isLast: false,
        callSrc: '',
        extension: '',
        phoneType: 0,
        encodePhone: '',
        phoneBtnText: ' 拨打'

      }
    },
    created() {
      var id = this.$util.decrypt(this.$route.query.id, "caseDetail");
      var caseArr = id.split("__");
      this.personLength = caseArr.length;
      var firstArr = caseArr[0].split('_');
      this.caseCode = firstArr[0];
      this.caseId = Number(firstArr[1]);
      this.caseManageId = Number(firstArr[2]);
      this.callData.caseId = this.caseId;
      this.callData.caseManageId = this.caseManageId;
      this.callData.caseCode = this.caseCode;
      for (var item of caseArr) {
        let arr = item.split('_');
        this.caseCodeArr.push(arr[0])
        this.caseObjArr.push(arr);
      }
      this.getdropdownData();
      this.getList();
    //  this.getLabel(); 
      this.assignData = Object.assign({}, this.callData);
      this.caseIndex = 0;
      // 司法、对账、公安用到
      this.params = {
        caseId: this.caseId,
        caseManageId: Number(this.caseManageId),
        caseCode: Number(this.caseCode),
      };
      // 接受呼叫系统返回信息
       window.addEventListener('message', function(e) {      
         let result = e.data;
         let pattern = /\"call_id\"\:\"([0-9.]{0,})/;
         let arr  = result.match(pattern) ;
         console.log(arr);
         let incoming_call = arr[1]; 
         console.log(incoming_call)
         if(incoming_call) {
          this.$axios
          .post("/api/assignee/call/addCallRecord", {
            answering: this.callData.callName,
            callId: incoming_call,
            caseId: this.caseId,
            phoneType: this.phoneType,
            relation: this.callData.contactRelation
          }).then(() => {
 
          })
          .catch( err => {
            console.log(err)
          })     
          }
         let backData = JSON.parse(result);
          if(backData.status_notify &&  backData.status_notify == '空闲') {
          this.disabledBtn = false;
          this.cancelBtn = true;
          this.phoneBtnText =' 拨号'
        } else if(backData.status_notify && ( backData.status_notify == '通话中' || backData.status_notify == '呼叫中...')) {
          if(backData.status_notify == '通话中'){ this.phoneBtnText= '通话中...'}
          else { this.phoneBtnText ='呼叫中'}
          this.disabledBtn = true;
          this.cancelBtn = false;
        } else if(backData.status_notify == '无设备') {
          this.$message.error('无通讯设备连接')
        }
          if(result.event == 'onclickCall') {
             
          }

        if(backData.status == 'Error') {
          this.$message.error(backData.msg)
        }
        if(result.status == 'Error') {
          if(result.event == 'loginReturn') {
             this.$message.error('呼叫系统'+result.msg)
          } else {
              this.$message.error(result.msg)
          }
        }
        if(backData.status == 'Success') {
         if(backData.event == 'loginReturn') {
             this.$message.success('呼叫系统'+backData.msg)
          } else {
              this.$message.success(backData.msg)
          }
        }
        if(result.status == 'Success') {
           this.$message.success(result.msg)
        }
      }.bind(this),false);  
       
    },
    methods: {
      // 获取案件详情数据
      getList() {
        this.$axios
          .post("/api/assignee/collectionManage/queryManualCaseDetails", {
            caseDetailBean: [{
              caseCode: this.caseCode,
              caseId: Number(this.caseId),
              caseManageId: Number(this.caseManageId)
            }]
          })
          .then(res => {
            if (res.data.code == 0) {
              var data = res.data.data[0];
              this.debtInfoBeans = data.debtInfoBean;
              this.userInfoBeans = data.userInfoBean;
              this.caseInfoBeans = data.caseInfoBean;
              this.caseCode = this.caseCode;
              this.caseId = Number(this.caseId);
              this.caseManageId = Number(this.caseManageId);
              this.callData.caseCode = this.caseCode;
              this.callData.caseId = parseInt(this.caseId);
              this.callData.caseManageId = parseInt(this.caseManageId);
              this.callData.callName = this.userInfoBeans.borrowerName;
              this.callData.callPhone = this.userInfoBeans.borrowerPhone;
              this.tabIndex = 0;
              this.componentIndex = 0;
              // 获取到实时通讯数据
              this.onLineData = {
                borrowerName: this.userInfoBeans.borrowerName,
                latestDebtMoney: this.debtInfoBeans.latestDebtMoney,
                loanInstitution: this.debtInfoBeans.loanInstitution,
                caseId: this.caseId,
                phone: this.userInfoBeans.borrowerPhone,
                productName: this.debtInfoBeans.productName,
              }
              this.params = {
                caseId: this.caseId,
                caseManageId: Number(this.caseManageId),
                caseCode: Number(this.caseCode),
              }
            } else {
              this.$util.failCallback(res.data, this);
            }
          })
          .catch(err => {
            console.log(err);
          });
      },
      // 获取人员下拉列表
      getdropdownData() {
        this.$axios
          .post("/api/assignee/collectionManage/initCaseDetails", {
            caseCode: this.caseCodeArr
          })
          .then(res => {
            if (res.data.code == 0) {
              this.dropdownData = res.data.data.caseCodeBean;
            } else {
              this.$util.failCallback(res.data, this);
            }
          })
          .catch(err => {
            console.log(err);
          });
      },
      // 改变还款时间
      getTime(val) {
        this.callData.promiseRepaymentTime = val;
        let pattern = /^[1-9][0-9]{0,9}([.][0-9]{0,2})?$/;
        // 还款金额和
        if (pattern.test(this.callData.promiseAmount) && val) {
          //this.refs['promiseAmount'].clearValidate();
          this.$children[2].$parent.$refs["promiseAmount"].clearValidate();
          if (pattern.test(this.callData.reliefAmount)) {
            this.$children[2].$parent.$refs["reliefAmount"].clearValidate();
          }
        }
      },

      // 选择亲属列表
      choose(data) {},
      // 跳转到更多信息页
      toMoreInfo() {
        let caseManageId = this.$util.encrypt(
          this.caseManageId.toString(),
          "moreInfo"
        );
        let url =
          window.location.origin +
          "/#/assignee_more_infomation?id=" +
          caseManageId;
        window.open(url);
      },
      // 失联修复打电话
      repiareCall(item) {
        this.callData.callName = item.name;
        this.callData.callPhone = item.phone;
        this.fixPhone = item.phone;
        this.fixName = item.name;
        this.phoneType = 1;
        this.callData.source = item.source;
        this.callData.strongId = item.strongId;
        this.callData.isRelevancy = 1;
        this.fixShow = "visible";
        this.arrowBtn = "el-icon-d-arrow-right fixedBtn";
        this.bg = "bgShow";
        this.paddingBtm = "content-show";
        this.getEncodePhone();
      },
      // 打电话
      callPhone(phoneItem) {
        this.callData.callName = phoneItem.name;
        this.callData.callPhone = phoneItem.phone;
        this.phoneType = 0;
        this.fixShow = "visible";
        this.arrowBtn = "el-icon-d-arrow-right fixedBtn";
        this.bg = "bgShow";
        this.paddingBtm = "content-show";
        this.getEncodePhone();
      },
      // 挂断电话
      cancelCall() {
        var json = {
          event : "hangUp",
          extension : this.extension
        }
        //发送
        this.SendJson(json);
      },
      // 发短信
      smsSend(phoneInfo) {
        if (phoneInfo.phone) {
          this.phoneInfo = phoneInfo
          this.smsVisible = true

        } else {
          // 提示选择
          this.$alert('请选择联系人进行操作', '提示', {
            confirmButtonText: '确定',
            callback: action => {}
          });
          this.smsVisible = false;
        }
      },
      smsClose() {
        this.smsVisible = false
      },
      // 失联修复-发短信
      smsSend2(phoneInfo) {
        this.phoneInfo2 = phoneInfo
        this.smsVisible2 = true
      },
      smsClose2() {
        this.smsVisible2 = false
      },
      // 切换人员
      changePerson(code) {
        for (let [ i, item ] of new Map( this.caseObjArr.map( ( item, i ) => [ i, item ] ) )  ) {
          if (item[0] == code) {
            this.caseCode = item[0];
            this.caseId = item[1];
            this.caseManageId = item[2];
            this.caseIndex = i;
            break;
          }
        }
        this.getList();
        this.getLabel()
      },
      // 保存
      submit(item) {
        var error = false;
        var errArr = document.getElementsByClassName("el-form-item__error");
        // 布局的时候写了好几个form表单，验证的是否懵逼了，改起来麻烦就不想改了
        this.$refs["phoneStatus"].validate(valid => {
          if (valid) {
            error = false;
          } else {
            error = true;
          }
        });
        this.$refs["phoneLabel"].validate(valid => {
          if (valid) {
            error = false;
          } else {
            error = true;
          }
        });
        this.$refs["repaymentIntention"].validate(valid => {
          if (valid) {
            error = false;
          } else {
            error = true;
          }
        });
        this.$refs["contactAttitude"].validate(valid => {
          if (valid) {
            error = false;
          } else {
            error = true;
          }
        });
        this.$refs["caseDevelopment"].validate(valid => {
          if (valid) {
            error = false;
          } else {
            error = true;
          }
        });
        this.$refs["collectionRemark"].validate(valid => {
          if (valid) {
            error = false;
          } else {
            error = true;
          }
        });
        if (errArr.length || error) {
          this.$message.error("表单验证错误");
          return false;
        } else {
          if (this.callData.promiseAmount) {
            this.callData.promiseAmount = parseFloat(this.callData.promiseAmount);
          } else {
            delete this.callData.promiseAmount;
            delete this.callData.promiseRepaymentTime;
          }
          if (this.callData.reliefAmount) {
            this.callData.reliefAmount = parseFloat(this.callData.reliefAmount);
          } else {
            delete this.callData.reliefAmount;
          }
          //  console.log(JSON.stringify(this.callData));
          this.$axios
            .post(
              "/api/assignee/collectionMark/saveCollectionMark",
              this.callData
            )
            .then(res => {
              if (res.data.code == 0) {
                this.$message({
                  type: "success",
                  message: "保存成功"
                });
                this.callData = this.assignData;
                if(!item) {
                this.fixShow = "hide";
                this.arrowBtn = "el-icon-d-arrow-left fixedBtn";
                this.bg = "bgHide";
                this.paddingBtm = "content-hide";
                }
                this.$refs.collectRecord.getList();
                this.callData.caseId = this.caseId;
                this.callData.caseManageId = this.caseManageId;
                this.callData.callName = this.userInfoBeans.borrowerName;
                this.callData.callPhone = this.userInfoBeans.borrowerPhone;
                this.$refs["phoneStatus"].resetFields();
                this.$refs["phoneLabel"].resetFields();
                this.$refs["repaymentIntention"].resetFields();
                this.$refs["contactAttitude"].resetFields();
                this.$refs["caseDevelopment"].resetFields();
                this.$refs["collectionRemark"].resetFields();
               if(this.callData.promiseAmount) {this.$refs["promise"].resetFields();}
                this.promiseInfoShow = false;
                this.callData.addContact = [];
               if (res.data.data.has == true) {
                  // 1、取消之前的定时任务，新建新的定时任务
                  this.$store.dispatch('timerChange', res.data.data.timeForRemind)
                  // 2、替换note
                  this.$store.dispatch('newNotesChange', res.data.data.info)
                }
              } else {
                this.$util.failCallback(res.data, this);
                return false;
              }
            })
            .catch(err => {
              console.log(err);
            });
        }
      },
      //  向下一个联系人打电话
      next() {
        let count = this.caseObjArr.length -this.caseIndex;
        if(count == 2) {
          this.isLast = 'disabled'
        }
        this.submit('show');
        this.caseIndex += 1;
        let item = this.caseObjArr[this.caseIndex];
        this.caseCode = item[0];
        this.caseId = item[1];
        this.caseManageId = item[2];
        this.getList();
        this.getLabel();
      },

      // 关闭催收悬浮层
      closeFix() {
        if (this.fixShow == "hide") {
          this.fixShow = "visible";
          this.arrowBtn = "el-icon-d-arrow-right fixedBtn";
          this.bg = "bgShow";
          this.paddingBtm = "content-show";
        } else {
          this.fixShow = "hide";
          this.arrowBtn = "el-icon-d-arrow-left fixedBtn";
          this.bg = "bgHide";
          this.paddingBtm = "content-hide";
        }
      },
      // 删除联系人
      deleteConcat(index) {
        this.callData.addContact.splice(index, 1);
      },

      // 遮罩层打电话
      onCall() {
        this.phoneType = 0;
        this.getEncodePhone();
      },
      getEncodePhone() {
        let reg = /^1[0-9]{10}$/;
        let data ;
        if(!reg.test(this.callData.callPhone) && !this.phoneType) {
          this.$message.error('号码格式错误')
          return false;
        }
        if(this.phoneType) {
          data = {
            phone: this.callData.callPhone,
            phoneType: this.phoneType,
            relevancyId: this.callData.strongId,
            relevancySource: this.callData.source
        } 
        } else {
          data = {
            phone: this.callData.callPhone,
            phoneType: this.phoneType,
          }
        }
        this.$axios
            .post("/api/assignee/call/getEncodePhone", data)
            .then(res => {
              if (res.data.code == 0) {
                this.encodePhone = res.data.data;
                this.getLoginInfo();
              } else {
                this.$util.failCallback(res.data, this);
              }
            })
            .catch(err => {
              console.log(err);
            });
        
      },
      // 接通电话
      getLoginInfo() {
        if(!this.callSrc) {
          this.$axios
            .post("/api/assignee/call/getLoginInfo", {})
            .then(res => {
              if (res.data.code == 0) {
                 let result = res.data.data;
                 this.extension = result.extension;
                 let iframe = document.createElement('iframe');
                 let div = document.getElementsByClassName('fixed-area')[0]
                 iframe.src = 'http://192.168.10.211/userweb_pro/webapi.php?module=index&action=index&username='+result.username+'&tokencode='+result.tokencode;
                // https://211.147.240.40:9999/
              //  iframe.src = 'https://211.147.240.40:4443/userweb_pro/webapi.php?module=index&action=index&username='+result.username+'&tokencode='+result.tokencode;
                
                iframe.id = 'iframeID',
                iframe.name = 'a';
                iframe.style.display = 'none'
                div.appendChild(iframe);
                this.callSrc = 1;
                let json = {
                  event : "onclickCall",
                  extension : this.extension,
                  strPhone : this.encodePhone
                }
                //发送
                iframe.onload = (() => {
                  console.log(json)
                  this.SendJson(json);
                })
              } else {
                this.$util.failCallback(res.data, this);
              }
            })
            .catch(err => {
              console.log(err);
            });
      } else {
         let json = {
          event : "onclickCall",
          extension : this.extension,
          strPhone :  this.encodePhone
        }
        //发送
        this.SendJson(json);
      }
      },
      SendJson(json){
          var str = JSON.stringify(json);  
          console.log(str)        
          window.frames[0].postMessage(str,"*");
      },

      // 还款意愿改变
      intentionChange(intentionArr) {
        if (intentionArr.indexOf("承诺还款") > -1) {
          this.$axios
            .post("/api/assignee/collectionApply/queryIsApplyDepreciation", {
              caseId: this.caseId,
            })
            .then(res => {
              if (res.data.code == 0) {
                if (res.data.data.apply) {
                  this.$message.error('已存在减免审批');
                  this.promiseInfoShow = false;
                //  this.callData.caseDevelopment = '';
                } else {
                  this.promiseInfoShow = true;
                }
              } else {
                this.$util.failCallback(res.data, this);
              }
            })
            .catch(err => {
              console.log(err);
            });
        } else {
          this.promiseInfoShow = false;
          this.callData.promiseAmount = "";
          this.callData.promiseRepaymentTime = "";
          this.callData.reliefAmount = "";
        }
      },
      // 添加联系人
      addConcatInfo() {
        var newConcat = Object.assign({}, this.addContact);
        this.callData.addContact.push(newConcat);
      },
      // 切换选项卡
      changeTab(tab) {
        this.tabIndex = tab.index;
        this.componentIndex = tab.index;
        // // tab.show=true
        // // if(tab.show==false){
        // //   tab.show=true
        // // }else{
        // //   tab.show=false
        // // }

        // return false;
        tab.method ? tab.method() : "";
      },

      // 关闭投诉弹窗
      complainClose() {
        this.complainVisible = false;
      },
      // 添加投诉事件
      addComplain() {
        this.complainVisible = true;
      },
      // 添加备忘
      addnote() {
        this.noteVisible = true;
      },
      // 关闭备忘
      noteClose() {
        this.noteVisible = false;
      },
      // 申请减免
      getapplyderateList() {
        this.$axios
          .post("/api/assignee/collectionManage/queryDepreciationApply", {
            caseCode: this.caseCode,
            caseId: this.caseId,
            caseManageId: this.caseManageId
          })
          .then(res => {
            if (res.data.code == 0) {
              this.applyderateTb = res.data.data;
            } else {
              this.$util.failCallback(res.data, this);
            }
          })
          .catch(err => {
            console.log(err);
          });
      },
      // 司法催收
      getjusticeList() {
        this.$axios
          .post("/api/assignee/collectionManage/queryJusticeApply", {
            caseCode: this.caseCode,
            caseId: this.caseId,
            caseManageId: this.caseManageId
          })
          .then(res => {
            if (res.data.code == 0) {
              this.justiceTb = res.data.data;
            } else {
              this.$util.failCallback(res.data, this);
            }
          })
          .catch(err => {
            console.log(err);
          });
      },
      // 公安协催
      getpoliceList() {
        this.$axios
          .post("/api/assignee/collectionManage/queryPoliceApply", {
            caseCode: this.caseCode,
            caseId: this.caseId,
            caseManageId: this.caseManageId
          })
          .then(res => {
            if (res.data.code == 0) {
              this.policeTb = res.data.data;
            } else {
              this.$util.failCallback(res.data, this);
            }
          })
          .catch(err => {
            console.log(err);
          });
      },
      // 对账
      getaccountCheckingList() {
        this.$axios
          .post("/api/assignee/collectionManage/queryCheckBillApply", {
            caseCode: this.caseCode,
            caseId: this.caseId,
            caseManageId: this.caseManageId
          })
          .then(res => {
            if (res.data.code == 0) {
              this.accountCheckingTb = res.data.data;
            } else {
              this.$util.failCallback(res.data, this);
            }
          })
          .catch(err => {
            console.log(err);
          });
      },
      // 访问
      getoutvisitList() {
        this.$axios
          .post("/api/assignee/collectionManage/queryVisitApply", {
            caseCode: this.caseCode,
            caseId: this.caseId,
            caseManageId: this.caseManageId
          })
          .then(res => {
            if (res.data.code == 0) {
              this.outvisitTb = res.data.data;
            } else {
              this.$util.failCallback(res.data, this);
            }
          })
          .catch(err => {
            console.log(err);
          });
      },
      // qq发送
      qqSend() {
        if (!this.userInfoBeans.qqCode) {
          return false;
        }
        this.$axios
          .post("/api/assignee/sms/qq/checkIsFriend", {
            qqCode: this.userInfoBeans.qqCode
          })
          .then(res => {
            if (res.data.code == 0) {
              this.isQQfriend = res.data.data.isFriend;
              this.myQQAccount = res.data.data.account;
              if (this.isQQfriend) {
                this.qqAddVisible = false;
                this.qqSendVisible = true;
              } else {
                this.qqAddVisible = true;
                this.qqSendVisible = false;
              }
            } else {
              this.$util.failCallback(res.data, this);
            }
          })
          .catch(err => {
            console.log(err);
          });
        // this.qqAddVisible = true;
      },
      // 关闭QQ - 加好友
      addQQclose() {
        this.qqAddVisible = false;
      },
      // 关闭QQ - 发送消息
      sendQQclose() {
        this.qqSendVisible = false;
      },
      // 微信发送
      wechatSend() {
        if (!this.userInfoBeans.qqCode) {
          return false;
        }
        this.$axios
          .post("/api/assignee/sms/weChat/checkIsFriend", {
            phone: this.onLineData.phone,
            qqCode: this.userInfoBeans.qqCode,
            wechatCode: this.userInfoBeans.wechatCode
          })
          .then(res => {
            if (res.data.code == 0) {
              this.isWechatfriend = res.data.data.isFriend;
              this.mywechatAccount = res.data.data.account;
              if (this.isWechatfriend) {
                this.wechatAddVisible = false;
                this.wechatSendVisible = true;
              } else {
                this.wechatAddVisible = true;
                this.wechatSendVisible = false;
              }
            } else {
              this.$util.failCallback(res.data, this);
            }
          })
          .catch(err => {
            console.log(err);
          });

      },
      // 关闭微信 - 加好友
      addwechatclose() {
        this.wechatAddVisible = false;
      },
      // 关闭微信 - 发送消息
      sendwechatclose() {
        this.wechatSendVisible = false;
      },
      // 微信-暂时没有用到
      weChatLink() {
        this.addweChatShow = true;
      },
      // 获取人员标签
      getLabel() {
        this.$axios
          .post("/api/assignee/collectionManage/queryLabels", {
            caseManageId: this.caseManageId
          })
          .then(res => {
            if (res.data.code == 0) {
             // this.labels = res.data.data;
              console.log(res.data.data)
            } else {
              this.$util.failCallback(res.data, this);
            }
          })
          .catch(err => {
            console.log(err);
          });
      },
      // 电话列表-选择联系人
      chooseConcat(item) {
        this.callData = this.assignData;
        this.callData.callName = item.name;
        this.callData.callPhone = item.phone;
        this.callData.contactRelation = item.relation;
      },
      // 手动输入电话号码
      inputPhone(phone) {
          if(this.fixPhone == phone && phone) {
            this.callData.callName = this.fixName
          } else {
            for(var item of this.userInfoBeans.contactPhone){
              if(item.phone == phone) {
                this.callData.callName = item.name;
                return ;
              }
            }
            this.callData.callName = '未知'
          }
      }


    }
  };

</script>

<style lang="scss" scoped>
  .content-body {
    margin: 10px 20px;
    .bd-header {
      position: relative;
      img {
        position: absolute;
        bottom: 0;
        left: 20px;
        display: block;
      }
      .caseNum {
        text-align: right;
        font-size: 24px;
        font-weight: 400;
        margin-bottom: 10px;
        height: 24px;
      }
      .batchNum {
        text-align: right;
        font-size: 18px;
        line-height: 20px;
        font-weight: 400;
        margin: 0 0 15px 0;
        height: 18px;
      }
      .personLable {
        margin-left: 140px;
        .label {
          display: inline-block;
          width: 60px;
          margin: 0 10px;
        }
      }
    }
    .infomation {
      font-size: 14px;
      margin: 20px 0 0 0;
      &>.head {
        // font-size: 18px;
        font-weight: 600;
        text-indent: 10px;
        &>.el-row {
          padding: 10px 0;
        }
      }
    }
  }

  .phoneBtn,
  .messageBtn {
    padding: 6px 3px 0 0;
    text-align: left;
    line-height: 16px;
    margin: 0;
    border: none;
    font-size: 16px;
  }

  .right {
    text-align: right;
  }

  .selection {
    float: right;
    display: b;
    display: block;
  } // 下面通话悬浮框
  .fixed-area {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    overflow-y: scroll;
    overflow-x: hidden;
    background: #f9f9f9;
    padding: 0 40px 20px;
    z-index: 999;
    h6 {
      text-align: center;
    }
    .fixedBtn {
      text-align: center;
      margin: 0 auto;
      transform: rotate(90deg);
      width: 20px;
      line-height: 20px;
      height: 60px;
      padding: 0;
      margin-top: -10px;
      font-size: 20px;
    }
  } // 遮罩层的展现和隐藏
  .hide {
    display: none;
  }

  .visible {
    display: block;
  }

  .content-hide {
    padding-bottom: 50px;
  }

  .content-show {
    padding-bottom: 400px;
  } // 遮罩层头部的颜色变化
  .bgHide {
    background: #f9f9f9;
  }

  .bgShow {
    background: #f9f9f9;
  } // 遮罩层案件信息样式
  .infoLeft .el-form-item {
    width: auto;
    height: 30px;
    .el-radio-button {
      width: auto;
    }
  }

  .infoLeft {
    display: inline-block;
    width: auto;
  }

  .infoRight {
    width: auto;
    margin-left: 20px;
    display: inline-block;
    vertical-align: top;
    .el-textarea {
      // position: relative;
      // top: 30px;
    }
  }

  .mg-10 {
    margin-left: 10px;
  } //遮罩层添加联系人
  .addArea {
    max-height: 135px;
    overflow: auto;
    .concatInfo {
      border-top: 1px #333 dashed;
      padding-top: 10px;
    }
  } // 遮罩层承诺还款、
  .promiseInfo {
    .form-detail .el-form-item label.el-form-item__label {
      width: 120px !important;
    }
  }

  .addBtn {
    border-top: 1px #333 dashed;
    padding-top: 10px;
  }

  .el-icon-delete {
    &:hover {
      color: #f00;
    }
  }

  .btnGroup {
    float: right;
    text-align: right;
    margin-right: 0px;
    width: 40%;
  }

  .my-tabs {
    margin-top: 40px;
  }

  .el-table th,
  td {
    text-align: center;
  }

  .el-badge {
    padding-right:20px;
    margin-left:10px;
  }

</style>
